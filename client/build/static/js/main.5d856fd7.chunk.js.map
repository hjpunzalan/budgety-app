{"version":3,"sources":["components/pages/BarGraph/BarGraph.module.scss","components/layout/MobileNav/MobileNav.module.scss","components/layout/BudgetSelector/BudgetSelector.module.scss","images/transaction.png","components/pages/EditTransaction/EditTransaction.module.scss","components/pages/Table/Table.module.scss","components/pages/AddTransaction/AddTransaction.module.scss","components/pages/EditBudget/EditBudget.module.scss","components/layout/Budget/Budget.module.scss","actions/types.ts","actions/alerts.ts","components/pages/PieGraph/graph.ts","utils/catchAsync.ts","actions/auth.ts","components/utils/Spinner/Spinner.tsx","components/pages/Home/Home.tsx","components/routing/PrivateRoute.tsx","components/auth/Login/Login.tsx","components/auth/ChangePassword/ChangePassword.tsx","components/utils/CheckAmount.ts","components/pages/Table/Table.tsx","components/pages/BarGraph/BarGraph.tsx","components/pages/PieGraph/PieGraph.tsx","components/layout/Budget/Budget.tsx","components/pages/Graphs/Graphs.tsx","actions/budget.ts","actions/transaction.ts","components/pages/AddBudget/AddBudget.tsx","components/pages/AddTransaction/AddTransaction.tsx","components/pages/EditBudget/EditBudget.tsx","components/pages/EditTransaction/EditTransaction.tsx","components/pages/UpdateMe/UpdateMe.tsx","actions/user.ts","components/routing/ContainerRoutes.tsx","components/layout/BudgetSelector/BudgetSelector.tsx","components/layout/MobileNav/MobileNav.tsx","components/layout/SideNav/SideNav.tsx","components/layout/Container/Container.tsx","components/auth/Register/Register.tsx","components/routing/PublicRoute.tsx","components/auth/ForgotPassword/ForgotPassword.tsx","components/auth/ResetPassword/ResetPassword.tsx","components/routing/Routes.tsx","components/utils/Alerts.tsx","App.tsx","reducers/currentBudget.ts","reducers/budgets.ts","reducers/transactions.ts","reducers/auth.ts","reducers/alerts.ts","reducers/charts.ts","reducers/index.ts","store.ts","index.tsx","components/pages/AddBudget/AddBudget.module.scss","components/auth/Login/Login.module.scss","components/layout/SideNav/SideNav.module.scss","components/pages/PieGraph/PieGraph.module.scss","components/auth/ResetPassword/ResetPassword.module.scss","components/pages/Home/Home.module.scss","components/pages/UpdateMe/UpdateMe.module.scss","components/auth/ForgotPassword/ForgotPassword.module.scss","components/layout/Container/Container.module.scss","components/pages/Graphs/Graphs.module.scss","components/auth/Register/Register.module.scss","components/auth/ChangePassword/ChangePassword.module.scss","components/utils/Spinner/Spinner.module.scss"],"names":["module","exports","ActionTypes","AlertType","PieGraphType","setAlert","msg","alertType","dispatch","type","resetAlert","alert","payload","catchAsync","fn","a","catch","err","console","error","response","status","logoutUser","errors","data","message","postLogin","email","password","axios","post","res","loginUser","firstName","success","Spinner","className","classes","spinner","cube1","cube2","Component","Home","state","loading","handleSubmit","setState","props","then","history","push","finally","page","nav","to","title","desc","cta","onClick","this","connect","auth","PrivateRoute","isAuthenticated","Axios","get","sessionExpired","prevProps","location","Route","Login","pathname","handleChange","e","target","name","value","preventDefault","homeLink","container","form","onSubmit","onChange","required","minLength","loginBtn","registerBtn","link","ChangePassword","currentPassword","newPassword","confirmPassword","changePassword","checkAmount","amount","newAmount","toFixed","replace","Table","pageNumber","hasMore","selectedId","latestClick","Date","getTime","setHasMore","loadMore","nextPage","currentBudget","_id","getTransactions","handleClick","transactionId","timesince","transactions","tip","table","heading","mobileTableHead","element","threshold","loader","key","map","group","Fragment","month","year","groupDate","colSpan","moment","format","t","i","transactionSelected","transaction","utc","date","toUpperCase","mobileTableCategory","categories","categoryIndex","mobileTableData","balance","withRouter","BarGraph","canvas","React","createRef","getFullYear","barGraph","margin","top","right","bottom","left","window","screen","width","current","offsetWidth","height","offsetHeight","barSpacing","svg","select","append","attr","canvasWidth","node","getBoundingClientRect","canvasHeight","graphWidth","graphHeight","graph","xAxisGroup","style","yAxisGroup","y","d3","range","x","paddingOuter","xMax","d","domain","ticks","lastTick","length","newLastTick","xAxis","tickFormat","toString","yAxis","tickValues","d3Tip","toolTip","offset","html","income","expense","call","selectAll","enter","val","on","event","show","currentTarget","hide","changeMonth","ref","component","size","extraSpace","legendHeight","dims","radius","budget","pieGraph","filter","totalAmount","m","reduce","acc","renderPieGraph","pie","sort","Math","abs","arcPath","outerRadius","innerRadius","colour","slice","text","category","labels","transition","duration","attrTween","_current","String","tooltip","pageX","pageY","exit","startAngle","endAngle","remove","newSlice","each","removeGraph","centre","Nav","PieGraph","nCategoriesByType","p","id","chart","Graphs","parseInt","handleYearChange","budgetId","getData","getCategoryData","getStats","getDates","years","charts","dates","barGraphHeading","autoFocus","barGraphTip","pieGraphGroup","alerts","budgets","Dashboard","match","params","getBudget","getAllBudget","stopLoading","path","budgetName","budgetBalance","startingBalance","mobileEditBudget","navSelected","addTransactions","clearTransactions","AddBudget","nCategories","prevBudgetListLength","addBudget","selectBudget","addCategories","info","warning","delCategories","pop","onChangeCategory","index","categoriesArray","maxLength","parseFloat","btnCategories","btnGreen","btnDel","AddTransaction","init","budgetIndex","min","max","Infinity","isoDate","toISOString","addTransaction","handleChangeType","handleBudgetChange","handleDateChange","handleAmount","findIndex","b","c","dateLabel","selected","dateFormat","peekNextMonth","showMonthDropdown","showYearDropdown","dropdownMode","inputNumberExp","inputNumberInc","checked","patch","EditBudget","editBudget","onChangeSelect","handleDelete","confirm","previousBudget","deleteBudget","handleCancel","goBack","undefined","btnCancel","delete","EditTransaction","dateFixed","find","deleteTransaction","UpdateMe","currentUser","lastName","updateUser","placeholder","ContainerRoutes","routes","exact","render","Budget","BudgetSelector","mobileSelect","mobileSelectBudget","handleSelect","MobileNav","url","getLogout","SideNav","add","currentBudgetId","src","transactionIcon","alt","budgetActions","budgetActionAdd","budgetActionEdit","userActions","Container","logout","Register","registerUser","PublicRoute","ForgotPassword","postForgotPassword","document","href","ResetPassword","patchResetPassword","resetToken","autoComplete","btmLink","pubRoutesArr","resetPassword","privRoutesArr","Routes","route","Alerts","alertId","StatusAlertService","removeAlert","showAlert","App","checkUser","initialState","reducers","combineReducers","action","forEach","newGroup","existAlready","middleware","thunk","composeEnhancers","composeWithDevTools","trace","store","createStore","applyMiddleware","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.5d856fd7.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"canvas\":\"BarGraph_canvas__3hEBn\",\"toolTip\":\"BarGraph_toolTip__-IO3l\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"MobileNav_nav__3OGF1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mobileSelect\":\"BudgetSelector_mobileSelect__294Ep\"};","module.exports = \"data:image/png;base64,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\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"EditTransaction_title__39FpA\",\"container\":\"EditTransaction_container__1Af6C\",\"spinner\":\"EditTransaction_spinner__HoeQA\",\"form\":\"EditTransaction_form__NIXY8\",\"btnGreen\":\"EditTransaction_btnGreen__274Q7\",\"btnCancel\":\"EditTransaction_btnCancel__1ewUC\",\"btnDel\":\"EditTransaction_btnDel__1ydqE\",\"type\":\"EditTransaction_type__3tdX0\",\"date\":\"EditTransaction_date__2gv3i\",\"inputNumberExp\":\"EditTransaction_inputNumberExp__f6diq\",\"deleteTransaction\":\"EditTransaction_deleteTransaction__31qdm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mobileTableCategory\":\"Table_mobileTableCategory__3D52a\",\"mobileTableHead\":\"Table_mobileTableHead__1AqLB\",\"mobileTableData\":\"Table_mobileTableData__geSEh\",\"tip\":\"Table_tip__3WvP8\",\"table\":\"Table_table__2sV9T\",\"heading\":\"Table_heading__1Fqzp\",\"transaction\":\"Table_transaction__FrpM5\",\"transactionSelected\":\"Table_transactionSelected__2xvYn\",\"groupDate\":\"Table_groupDate__1i850\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"AddTransaction_title__12OcN\",\"container\":\"AddTransaction_container__2I58O\",\"spinner\":\"AddTransaction_spinner__2gTxr\",\"form\":\"AddTransaction_form__1nePp\",\"btnGreen\":\"AddTransaction_btnGreen__3pq52\",\"btnCancel\":\"AddTransaction_btnCancel__OZYHI\",\"btnDel\":\"AddTransaction_btnDel__3ukYD\",\"type\":\"AddTransaction_type__1Ez66\",\"date\":\"AddTransaction_date__3DTgY\",\"inputNumberExp\":\"AddTransaction_inputNumberExp__37H7t\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"EditBudget_title__kxK8p\",\"container\":\"EditBudget_container__2lRgm\",\"spinner\":\"EditBudget_spinner__28_Ol\",\"form\":\"EditBudget_form__3jvL0\",\"btnGreen\":\"EditBudget_btnGreen__N3q3E\",\"btnCancel\":\"EditBudget_btnCancel__3PXN0\",\"btnDel\":\"EditBudget_btnDel__3zKwZ\",\"btnCategories\":\"EditBudget_btnCategories__ExJtZ\",\"deleteBudget\":\"EditBudget_deleteBudget__1cQiN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Budget_container__31nGu\",\"nav\":\"Budget_nav__3QRpQ\",\"navSelected\":\"Budget_navSelected__L-FvH\",\"budget\":\"Budget_budget__1OB05\",\"budgetName\":\"Budget_budgetName__qXiF3\",\"budgetBalance\":\"Budget_budgetBalance__3Qq4j\",\"mobileEditBudget\":\"Budget_mobileEditBudget__2B3G6\",\"addTransactions\":\"Budget_addTransactions__1WYeu\"};","import {\r\n\tAddTransactionAction,\r\n\tGetTransactionsAction,\r\n\tClearTransactionsAction\r\n} from \"./transaction\";\r\nimport { UpdateUserAction } from \"./user\";\r\nimport { SetAlertAction, ResetAlertAction } from \"./alerts\";\r\nimport {\r\n\tLoginAction,\r\n\tLogoutAction,\r\n\tRegUserAction,\r\n\tChangePassAction,\r\n\tResetPassAction,\r\n\tCheckUserAction\r\n} from \"./auth\";\r\nimport {\r\n\tAddBudgetAction,\r\n\tGetAllBudgetAction,\r\n\tEditBudgetAction,\r\n\tDeleteBudgetAction,\r\n\tGetCategoryDataAction,\r\n\tGetStatsAction,\r\n\tGetDatesAction\r\n} from \"./budget\";\r\n\r\nexport enum ActionTypes {\r\n\t// unique val\r\n\t// KEY[0] = 0,\r\n\t// KEY[1] = 1\r\n\t// Added initializer for redux devtools\r\n\talert = \"ALERT\",\r\n\tresetAlert = \"RESET_ALERT\",\r\n\tregisterUser = \"REGISTER_USER\",\r\n\tloginUser = \"LOGIN_USER\",\r\n\tlogoutUser = \"LOGOUT_USER\",\r\n\tchangePassword = \"CHANGE_PASSWORD\",\r\n\tupdateUser = \"UPDATE_USER\",\r\n\tforgotPassword = \"FORGOT_PASSWORD\",\r\n\tresetPassword = \"RESET_PASSWORD\",\r\n\tcheckUser = \"CHECK_AUTH\",\r\n\t//\r\n\t// BUDGET\r\n\taddBudget = \"ADD_BUDGET\",\r\n\tgetAllBudget = \"GET_ALL_BUDGET\",\r\n\tclearBudget = \"CLEAR_BUDGET\",\r\n\teditBudget = \"EDIT_BUDGET\",\r\n\tdeleteBudget = \"DELETE_BUDGET\",\r\n\tgetBudget = \"GET_BUDGET\",\r\n\t//\r\n\t//  TRANSACTIONS\r\n\taddTransaction = \"ADD_TRANSACTION\",\r\n\tgetTransactions = \"GET_TRANSACTIONS\",\r\n\tclearTransactions = \"CLEAR_TRANSACTIONS\",\r\n\r\n\t// CHARTS\r\n\tgetStats = \"GET_STATS\",\r\n\tgetCategoryData = \"GET_CATEGORY_DATA\",\r\n\tgetDates = \"GET_DATES\"\r\n}\r\n\r\n// export type UserActions = ;\r\nexport type AuthActions =\r\n\t| LoginAction\r\n\t| LogoutAction\r\n\t| RegUserAction\r\n\t| ChangePassAction\r\n\t| UpdateUserAction\r\n\t| ResetPassAction\r\n\t| CheckUserAction;\r\nexport type AlertActions = SetAlertAction | ResetAlertAction;\r\nexport type BudgetActions =\r\n\t| AddBudgetAction\r\n\t| GetAllBudgetAction\r\n\t| EditBudgetAction\r\n\t| DeleteBudgetAction\r\n\t| LogoutAction;\r\n\r\nexport type ChartActions =\r\n\t| GetCategoryDataAction\r\n\t| GetStatsAction\r\n\t| LogoutAction\r\n\t| GetDatesAction;\r\n\r\nexport type TransactionActions =\r\n\t| AddTransactionAction\r\n\t| GetTransactionsAction\r\n\t| ClearTransactionsAction\r\n\t| LogoutAction;\r\n","import { Dispatch } from \"redux\";\r\nimport { ActionTypes } from \"./types\";\r\n\r\nexport enum AlertType {\r\n\tsuccess = \"success\",\r\n\terror = \"error\",\r\n\tinfo = \"info\",\r\n\twarning = \"warning\"\r\n}\r\n\r\nexport type Alert = {\r\n\tmsg: string;\r\n\talertType: AlertType;\r\n};\r\n\r\nexport interface ResetAlertAction {\r\n\ttype: ActionTypes.resetAlert;\r\n}\r\n\r\nexport interface SetAlertAction {\r\n\ttype: ActionTypes.alert;\r\n\tpayload: Alert;\r\n}\r\n\r\nexport const setAlert = (msg: string, alertType: AlertType) => (\r\n\tdispatch: Dispatch\r\n) => {\r\n\tdispatch<ResetAlertAction>({ type: ActionTypes.resetAlert });\r\n\tdispatch<SetAlertAction>({\r\n\t\ttype: ActionTypes.alert,\r\n\t\tpayload: { msg, alertType }\r\n\t});\r\n};\r\n\r\nexport const resetAlert = () => (dispatch: Dispatch) => {\r\n\tdispatch<ResetAlertAction>({\r\n\t\ttype: ActionTypes.resetAlert\r\n\t});\r\n};\r\n","import PieGraph from \"./PieGraph\";\r\nimport * as d3 from \"d3\";\r\nimport { PieArcDatum } from \"d3\";\r\nimport classes from \"./PieGraph.module.scss\";\r\nimport { BudgetCategoryData } from \"../../../reducers/charts\";\r\nimport { checkAmount } from \"../../utils/CheckAmount\";\r\n\r\nexport enum PieGraphType {\r\n\tincome = \"income\",\r\n\texpense = \"expense\"\r\n}\r\n\r\ninterface PathElement extends SVGPathElement {\r\n\t_current: PieArcDatum<BudgetCategoryData>;\r\n}\r\n\r\nexport const graph = (component: PieGraph, size: number, extraSpace: number, legendHeight: number) => {\r\n\tconst dims = { height: size, width: size, radius: size / 2 }; // dimension of the pie chart\r\n\tconst legendBoxSize = 10;\r\n\r\n\t// Locate budget by budget ID to retrieve its categories\r\n\tconst budget = component.props.currentBudget;\r\n\tlet data = component.props.pieGraph;\r\n\tconst type = component.props.type;\r\n\r\n\t// Remove null values from graph\r\n\tif (type === PieGraphType.income) {\r\n\t\t// Remove slices\r\n\t\tdata = component.props.pieGraph.filter(d => d.income !== 0);\r\n\t} else data = component.props.pieGraph.filter(d => d.expense !== 0);\r\n\r\n\t// To find total amount\r\n\tlet totalAmount = 0;\r\n\tif (data.length > 0)\r\n\t\ttotalAmount = data.map(m => m[type]).reduce((acc, val) => acc + val);\r\n\r\n\tconst renderPieGraph = () => {\r\n\t\t// Pie function to convert data into pieData\r\n\t\tconst pie = d3\r\n\t\t\t.pie<BudgetCategoryData>()\r\n\t\t\t.sort(null) // prevents default sorting\r\n\t\t\t.value(d => Math.abs(d[type]));\r\n\r\n\t\t// Function that generates arc Path based on PieData with argument data to pie function\r\n\t\tconst arcPath = d3\r\n\t\t\t.arc<PieArcDatum<BudgetCategoryData>>()\r\n\t\t\t.outerRadius(dims.radius)\r\n\t\t\t.innerRadius(0);\r\n\r\n\t\t// ordinal scale\r\n\t\tconst colour = d3.scaleOrdinal(\r\n\t\t\tcomponent.props.type === PieGraphType.expense\r\n\t\t\t\t? [\r\n\t\t\t\t\t\"#fbb4ae\",\r\n\t\t\t\t\t\"#b3cde3\",\r\n\t\t\t\t\t\"#ccebc5\",\r\n\t\t\t\t\t\"#decbe4\",\r\n\t\t\t\t\t\"#fed9a6\",\r\n\t\t\t\t\t\"#ffffcc\",\r\n\t\t\t\t\t\"#e5d8bd\",\r\n\t\t\t\t\t\"#fddaec\"\r\n\t\t\t\t]\r\n\t\t\t\t: [\r\n\t\t\t\t\t\"#b3e2cd\",\r\n\t\t\t\t\t\"#fdcdac\",\r\n\t\t\t\t\t\"#cbd5e8\",\r\n\t\t\t\t\t\"#f4cae4\",\r\n\t\t\t\t\t\"#e6f5c9\",\r\n\t\t\t\t\t\"#fff2ae\",\r\n\t\t\t\t\t\"#f1e2cc\",\r\n\t\t\t\t\t\"#cccccc\"\r\n\t\t\t\t]\r\n\t\t);\r\n\r\n\t\t//////////////////////////////////////// TWEENS //////////////////////////////////////////\r\n\t\tconst arcTweenEnter = (d: PieArcDatum<BudgetCategoryData>) => {\r\n\t\t\tlet i = d3.interpolate(d.endAngle, d.startAngle);\r\n\r\n\t\t\treturn function (t: number) {\r\n\t\t\t\td.startAngle = i(t);\r\n\t\t\t\treturn String(arcPath(d));\r\n\t\t\t};\r\n\t\t};\r\n\r\n\t\tconst arcTweenExit = (d: PieArcDatum<BudgetCategoryData>) => {\r\n\t\t\tlet i = d3.interpolate(d.startAngle, d.endAngle);\r\n\r\n\t\t\treturn function (t: number) {\r\n\t\t\t\td.startAngle = i(t);\r\n\t\t\t\treturn String(arcPath(d));\r\n\t\t\t};\r\n\t\t};\r\n\t\t// use function keyword so 'this' will be dynamically scoped\r\n\t\t// Using updated data\r\n\t\tfunction arcTweenUpdate(\r\n\t\t\tthis: PathElement,\r\n\t\t\td: PieArcDatum<BudgetCategoryData>\r\n\t\t) {\r\n\t\t\t// interpolate between the two objects and not just angles because interpolation may happen in two of the angles or one\r\n\t\t\tlet i = d3.interpolate(this._current, d);\r\n\r\n\t\t\t// update the current prop with the new updated data for future changes\r\n\t\t\t// Initialise a value\r\n\t\t\t// Will be replaced as data from enter selection\r\n\t\t\t// Update will compare new data from current one\r\n\t\t\tthis._current = i(1); // or d\r\n\r\n\t\t\treturn function (t: number) {\r\n\t\t\t\treturn String(arcPath(i(t)));\r\n\t\t\t};\r\n\t\t}\r\n\t\t////////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n\t\tconst graph = d3\r\n\t\t\t.select(component.canvas.current)\r\n\t\t\t.select(\"svg\")\r\n\t\t\t.select(\"g\");\r\n\r\n\t\t// Update data\r\n\t\tconst slice = graph.selectAll(\"g.slice\").data(pie(data));\r\n\r\n\t\t////////////////////////// Handle current selection//////////////////////////////\r\n\t\t// Updates labels/ legend\r\n\t\tslice\r\n\t\t\t.select(\"text\")\r\n\t\t\t.attr(\"transform\", (d, i) => `translate(${-size / 3 + extraSpace},${i * 20 - size / 2 - legendHeight + extraSpace / 2})`)\r\n\t\t\t.text(d => budget.categories[d.data._id.category] + ` (${((100 * d.data[type]) / totalAmount).toFixed(0)}%)`)\r\n\t\t\t.attr(\"class\", classes.labels);\r\n\r\n\r\n\t\tslice\r\n\t\t\t.select(\"rect\") // make a matching color rect\r\n\t\t\t.attr(\"width\", legendBoxSize)\r\n\t\t\t.attr(\"height\", legendBoxSize)\r\n\t\t\t.attr(\"fill\", (d, i) => colour(budget.categories[d.data._id.category]))\r\n\t\t\t.attr(\"transform\", (d, i) => `translate(${-size / 3 + extraSpace - 1.5 * legendBoxSize},${i * 20 - size / 2 - legendHeight + extraSpace / 2 - legendBoxSize})`)\r\n\r\n\t\t// Update path and fill colour with animation\r\n\t\tslice\r\n\t\t\t.select<PathElement>(\"path\")\r\n\t\t\t.attr(\"d\", arcPath)\r\n\t\t\t.attr(\"fill\", d => colour(budget.categories[d.data._id.category])) // update colours\r\n\t\t\t.transition()\r\n\t\t\t.duration(750)\r\n\t\t\t.attrTween(\"d\", arcTweenUpdate);\r\n\r\n\t\t// Update tooltip data and position\r\n\t\t// Handles real-time event movement\r\n\t\tslice.on(\"mousemove\", (event, d) => {\r\n\t\t\td3.select(component.tooltip.current)\r\n\t\t\t\t.style(\"left\", event.pageX + 15 + \"px\")\r\n\t\t\t\t.style(\"top\", event.pageY + \"px\")\r\n\t\t\t\t.select(\"#pieGraphTip\")\r\n\t\t\t\t.text(\r\n\t\t\t\t\t`${budget.categories[d.data._id.category]}: ${checkAmount(\r\n\t\t\t\t\t\tMath.abs(d.data[type])\r\n\t\t\t\t\t)} (${((100 * d.data[type]) / totalAmount).toFixed(0)}%)\r\n\t\t\t\t\t\t`\r\n\t\t\t\t);\r\n\t\t});\r\n\r\n\t\t/////////////////////////// Handle exit selection/////////////////////////\r\n\t\t// Remove each slice\r\n\t\tslice\r\n\t\t\t.exit<PieArcDatum<BudgetCategoryData>>()\r\n\t\t\t.select(\"path\")\r\n\t\t\t.transition()\r\n\t\t\t.duration(750) // 750ms\r\n\t\t\t.attrTween(\"d\", arcTweenExit)\r\n\t\t\t.remove()\r\n\r\n\t\t// Remove text label on graph\r\n\t\tslice\r\n\t\t\t.exit()\r\n\t\t\t.select(\"text\")\r\n\t\t\t.remove()\r\n\r\n\r\n\t\tslice\r\n\t\t\t.exit()\r\n\t\t\t.select(\"rect\")\r\n\t\t\t.remove()\r\n\r\n\t\tslice.exit().remove()\r\n\r\n\t\t/////////////////////////// Handle enter selection///////////////////////\r\n\t\tconst newSlice = slice\r\n\t\t\t.enter()\r\n\t\t\t.append(\"g\")\r\n\t\t\t.attr(\"class\", \"slice\");\r\n\r\n\t\tnewSlice\r\n\t\t\t.append<PathElement>(\"path\")\r\n\t\t\t.attr(\"d\", arcPath)\r\n\t\t\t.attr(\"stroke\", \"#fff\")\r\n\t\t\t.attr(\"stroke-width\", 3)\r\n\t\t\t.attr(\"fill\", d => colour(budget.categories[d.data._id.category]))\r\n\t\t\t.style(\"cursor\", \"pointer\")\r\n\t\t\t.each(function (d) {\r\n\t\t\t\tthis._current = d;\r\n\t\t\t})\r\n\t\t\t.transition()\r\n\t\t\t.duration(750) // 750ms\r\n\t\t\t.attrTween(\"d\", arcTweenEnter);\r\n\r\n\t\t// Add mouse events for tooltip on balance and %\r\n\t\t// Tool tip connected to component PieGraph\r\n\t\t// Tool tip positioning depents on mouse position\r\n\t\tnewSlice\r\n\t\t\t.on(\"mouseover\", () => {\r\n\t\t\t\td3.select(component.tooltip.current)\r\n\t\t\t\t\t.style(\"opacity\", 1)\r\n\t\t\t\t\t.style(\"color\", type === PieGraphType.income ? \"green\" : \"red\");\r\n\t\t\t})\r\n\t\t\t.on(\"mousemove\", (event, d) => {\r\n\t\t\t\td3.select(component.tooltip.current)\r\n\t\t\t\t\t.style(\"left\", event.pageX + 15 + \"px\")\r\n\t\t\t\t\t.style(\"top\", event.pageY + \"px\")\r\n\t\t\t\t\t.select(\"#pieGraphTip\")\r\n\t\t\t\t\t.text(\r\n\t\t\t\t\t\t`${budget.categories[d.data._id.category]}: ${checkAmount(\r\n\t\t\t\t\t\t\tMath.abs(d.data[type])\r\n\t\t\t\t\t\t)} (${((100 * d.data[type]) / totalAmount).toFixed(0)}%)\r\n\t\t\t\t\t\t`\r\n\t\t\t\t\t);\r\n\t\t\t})\r\n\t\t\t.on(\"mouseout\", () =>\r\n\t\t\t\td3.select(component.tooltip.current).style(\"opacity\", 0)\r\n\t\t\t);\r\n\r\n\t\tnewSlice\r\n\t\t\t.append(\"text\")\r\n\t\t\t.attr(\"transform\", (d, i) => `translate(${-size / 3 + extraSpace},${i * 20 - size / 2 - legendHeight + extraSpace / 2})`)\r\n\t\t\t.text(d => budget.categories[d.data._id.category] + ` (${((100 * d.data[type]) / totalAmount).toFixed(0)}%)`)\r\n\t\t\t.attr(\"class\", classes.labels);\r\n\r\n\r\n\t\tnewSlice\r\n\t\t\t.append(\"rect\") // make a matching color rect\r\n\t\t\t.attr(\"width\", legendBoxSize)\r\n\t\t\t.attr(\"height\", legendBoxSize)\r\n\t\t\t.attr(\"fill\", (d, i) => colour(budget.categories[d.data._id.category]))\r\n\t\t\t.attr(\"transform\", (d, i) => `translate(${-size / 3 + extraSpace - 1.5 * legendBoxSize},${i * 20 - size / 2 - legendHeight + extraSpace / 2 - legendBoxSize})`)\r\n\r\n\t};\r\n\r\n\r\n\r\n\t// Remove graph if there's no amount depending on type\r\n\tif (data.length === 0) {\r\n\t\tcomponent.setState({\r\n\t\t\tremoveGraph: true\r\n\t\t});\r\n\t} else if (data.length > 0 && component.state.removeGraph) {\r\n\t\t// IF removeGraph was previously true\r\n\t\t// Add graph if there is amount and was removed before\r\n\t\t// dims === size\r\n\t\tconst centre = {\r\n\t\t\tx: (dims.width + extraSpace) / 2,\r\n\t\t\ty: (dims.height + extraSpace) / 2\r\n\t\t};\r\n\r\n\t\tcomponent.setState(\r\n\t\t\t{\r\n\t\t\t\tremoveGraph: false\r\n\t\t\t},\r\n\t\t\t() => {\r\n\t\t\t\t// Initialise canvas\r\n\t\t\t\td3.select(component.canvas.current)\r\n\t\t\t\t\t.append(\"svg\")\r\n\t\t\t\t\t.attr(\"width\", dims.width + extraSpace)\r\n\t\t\t\t\t.attr(\"height\", dims.height + legendHeight + extraSpace)\r\n\t\t\t\t\t.append(\"g\")\r\n\t\t\t\t\t.attr(\"transform\", `translate(${centre.x}, ${centre.y + legendHeight})`)\r\n\r\n\t\t\t\trenderPieGraph();\r\n\t\t\t}\r\n\t\t);\r\n\t} else renderPieGraph(); // Normally render the graph\r\n};\r\n","import { ActionTypes } from \"./../actions/types\";\r\nimport { setAlert, AlertType } from \"../actions\";\r\nimport { AxiosError } from \"axios\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { StoreState } from \"../reducers\";\r\nimport { AnyAction } from \"redux\";\r\n\r\n// Normal Dispatch Action from redux require returning an action and not function\r\n// It requires a type property which is not needed with Thunk\r\n\r\nconst catchAsync = (\r\n\tfn: (dispatch: ThunkDispatch<StoreState, void, AnyAction>) => Promise<void>\r\n) => {\r\n\treturn async (dispatch: ThunkDispatch<StoreState, void, AnyAction>) => {\r\n\t\tawait fn(dispatch).catch((err: AxiosError) => {\r\n\t\t\tconsole.error(err);\r\n\t\t\tif (err.response) {\r\n\t\t\t\t// Log user out if deactivated --- 401 Unauthorized\r\n\t\t\t\t// Log out user if no session exist --- 403  Forbidden\r\n\t\t\t\tif (err.response.status === 401 || err.response.status === 403)\r\n\t\t\t\t\tdispatch({ type: ActionTypes.logoutUser });\r\n\r\n\t\t\t\tconst errors = err.response.data;\r\n\r\n\t\t\t\t// If server down\r\n\t\t\t\tif (err.response.status === 500 && !errors.message) {\r\n\t\t\t\t\treturn dispatch(\r\n\t\t\t\t\t\tsetAlert(\r\n\t\t\t\t\t\t\t\"Unfortunately there's a problem in our end...\",\r\n\t\t\t\t\t\t\tAlertType.error\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\tdispatch(setAlert(errors.message, AlertType.error));\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n};\r\n\r\nexport default catchAsync;\r\n","import axios from \"axios\";\r\nimport { IResetPassState } from \"../components/auth/ResetPassword/ResetPassword\";\r\nimport { IForgotPassState } from \"../components/auth/ForgotPassword/ForgotPassword\";\r\nimport { ChangePassForm } from \"../components/auth/ChangePassword/ChangePassword\";\r\nimport { ActionTypes } from \"./types\";\r\nimport { IUser } from \"../actions\";\r\nimport catchAsync from \"../utils/catchAsync\";\r\nimport { setAlert, AlertType } from \"./alerts\";\r\nimport { IRegisterState } from \"../components/auth/Register/Register\";\r\nimport { RouteComponentProps } from \"react-router\";\r\n\r\nexport interface LoginAction {\r\n\ttype: ActionTypes.loginUser;\r\n\tpayload: IUser;\r\n}\r\nexport interface LogoutAction {\r\n\ttype: ActionTypes.logoutUser;\r\n}\r\n\r\nexport interface RegUserAction {\r\n\ttype: ActionTypes.registerUser;\r\n\tpayload: IUser;\r\n}\r\n\r\nexport interface ChangePassAction {\r\n\ttype: ActionTypes.changePassword;\r\n\tpayload: IUser;\r\n}\r\n\r\nexport interface ResetPassAction {\r\n\ttype: ActionTypes.resetPassword;\r\n\tpayload: IUser;\r\n}\r\n\r\nexport interface CheckUserAction {\r\n\ttype: ActionTypes.checkUser;\r\n\tpayload: IUser;\r\n}\r\n\r\nexport const checkUser = () =>\r\n\tcatchAsync(async dispatch => {\r\n\t\tconst res = await axios.get<IUser>(\"/api/auth/checkuser\");\r\n\r\n\t\tif (res.data)\r\n\t\t\t// authenticate user if there is data\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: ActionTypes.checkUser,\r\n\t\t\t\tpayload: res.data\r\n\t\t\t});\r\n\t});\r\n\r\nexport const postLogin = (email: string, password: string) =>\r\n\tcatchAsync(async dispatch => {\r\n\t\tconst res = await axios.post<IUser>(\"/api/auth/login\", {\r\n\t\t\temail,\r\n\t\t\tpassword\r\n\t\t});\r\n\r\n\t\tdispatch<LoginAction>({\r\n\t\t\ttype: ActionTypes.loginUser,\r\n\t\t\tpayload: res.data\r\n\t\t});\r\n\r\n\t\tdispatch(\r\n\t\t\tsetAlert(\r\n\t\t\t\t`${res.data.firstName} successfully logged in`,\r\n\t\t\t\tAlertType.success\r\n\t\t\t)\r\n\t\t);\r\n\t});\r\n\r\nexport const getLogout = () =>\r\n\tcatchAsync(async dispatch => {\r\n\t\tawait axios.get(\"/api/auth/logout\");\r\n\t\tdispatch<LogoutAction>({ type: ActionTypes.logoutUser });\r\n\t});\r\n\r\nexport const registerUser = (\r\n\tform: IRegisterState,\r\n\tprops: RouteComponentProps\r\n) =>\r\n\tcatchAsync(async dispatch => {\r\n\t\tconst res = await axios.post<IUser>(\"/api/users/register\", form);\r\n\t\tdispatch<RegUserAction>({\r\n\t\t\ttype: ActionTypes.registerUser,\r\n\t\t\tpayload: res.data\r\n\t\t});\r\n\r\n\t\tprops.history.push(\"/user/budget/new\");\r\n\t\tdispatch(\r\n\t\t\tsetAlert(\r\n\t\t\t\t`Welcome ${res.data.firstName}! You have been successfully registered!`,\r\n\t\t\t\tAlertType.success\r\n\t\t\t)\r\n\t\t);\r\n\t});\r\n\r\nexport const changePassword = (form: ChangePassForm) =>\r\n\tcatchAsync(async dispatch => {\r\n\t\tconst res = await axios.post<IUser>(\"/api/auth/changepassword\", form);\r\n\t\tdispatch<ChangePassAction>({\r\n\t\t\ttype: ActionTypes.changePassword,\r\n\t\t\tpayload: res.data\r\n\t\t});\r\n\r\n\t\tdispatch(setAlert(\"Password successfully changed!\", AlertType.success));\r\n\t});\r\n\r\nexport const postForgotPassword = (form: IForgotPassState, url: string) =>\r\n\tcatchAsync(async dispatch => {\r\n\t\tawait axios.post(\"/api/auth/forgotpassword\", { email: form.email, url });\r\n\t\tdispatch(\r\n\t\t\tsetAlert(`Password reset link sent to ${form.email}.`, AlertType.success)\r\n\t\t);\r\n\t});\r\n\r\nexport const patchResetPassword = (form: IResetPassState, resetToken: string) =>\r\n\tcatchAsync(async dispatch => {\r\n\t\tconst res = await axios.patch<IUser>(\r\n\t\t\t`/api/auth/resetpassword/${resetToken}`,\r\n\t\t\tform\r\n\t\t);\r\n\t\tdispatch<ResetPassAction>({\r\n\t\t\ttype: ActionTypes.resetPassword,\r\n\t\t\tpayload: res.data\r\n\t\t});\r\n\t\tdispatch(setAlert(\"Password changed!\", AlertType.success));\r\n\t});\r\n","import React, { Component } from \"react\";\r\nimport classes from \"./Spinner.module.scss\";\r\n\r\nclass Spinner extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className={classes.spinner}>\r\n\t\t\t\t<div className={classes.cube1}></div>\r\n\t\t\t\t<div className={classes.cube2}></div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Spinner;\r\n","/**********************\r\n *\r\n * Main Landing page for the app\r\n * 1. It includes the title and description of the app\r\n * 2. Call to action button\r\n */\r\n\r\nimport React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Link, RouterProps } from \"react-router-dom\";\r\nimport { postLogin } from \"../../../actions/auth\";\r\nimport { StoreState } from \"../../../reducers\";\r\nimport Spinner from \"../../utils/Spinner/Spinner\";\r\nimport classes from \"./Home.module.scss\";\r\n\r\ninterface Props extends StoreState, RouterProps {\r\n\tpostLogin: (email: string, password: string) => Promise<void>;\r\n}\r\nclass Home extends Component<Props> {\r\n\tstate = {\r\n\t\tloading: false,\r\n\t};\r\n\r\n\thandleSubmit = () => {\r\n\t\tthis.setState({ loading: true });\r\n\t\t// Login user\r\n\t\tthis.props\r\n\t\t\t.postLogin(\"test@example.com\", \"test123\")\r\n\t\t\t.then(() => {\r\n\t\t\t\tthis.props.history.push(\"/user\");\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis.setState({ loading: false });\r\n\t\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className={classes.page}>\r\n\t\t\t\t<div className={classes.nav}>\r\n\t\t\t\t\t<Link to=\"/login\">\r\n\t\t\t\t\t\t<button>Login</button>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</div>\r\n\t\t\t\t<h1 className={classes.title}>Budgety</h1>\r\n\t\t\t\t<h3 className={classes.desc}>\r\n\t\t\t\t\tHandle your annual budget with a click.\r\n\t\t\t\t</h3>\r\n\t\t\t\t<button className={classes.cta} onClick={this.handleSubmit}>\r\n\t\t\t\t\t{this.state.loading ? (\r\n\t\t\t\t\t\t<div className={classes.spinner}>\r\n\t\t\t\t\t\t\t<Spinner />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\"Try it now\"\r\n\t\t\t\t\t)}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state: StoreState) => ({\r\n\tauth: state.auth,\r\n});\r\n\r\nexport default connect(mapStateToProps, { postLogin })(Home);\r\n","import React from \"react\";\r\nimport { Redirect, Route, RouteProps } from \"react-router\";\r\nimport Axios from \"axios\";\r\nimport { connect } from \"react-redux\";\r\nimport { Dispatch } from \"redux\";\r\nimport { ActionTypes } from \"../../actions\";\r\n\r\ninterface Props extends RouteProps {\r\n\tisAuthenticated: boolean;\r\n\tsessionExpired: () => { type: ActionTypes };\r\n}\r\n\r\nclass PrivateRoute extends Route<Props> {\r\n\tcomponentDidMount() {\r\n\t\t// Log user out if session expires\r\n\t\tif (this.props.isAuthenticated)\r\n\t\t\tAxios.get<boolean>(\"/api/auth/isloggedin\")\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tif (!res.data) this.props.sessionExpired();\r\n\t\t\t\t\telse return;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t\t// If server fails, log user out\r\n\t\t\t\t\tthis.props.sessionExpired();\r\n\t\t\t\t});\r\n\t}\r\n\t// Can be too much request\r\n\tcomponentDidUpdate(prevProps: Props) {\r\n\t\tif (prevProps.location !== this.props.location) {\r\n\t\t\t// Log user out if session expires\r\n\t\t\tif (this.props.isAuthenticated)\r\n\t\t\t\tAxios.get<boolean>(\"/api/auth/isloggedin\")\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tif (res.data === false) this.props.sessionExpired();\r\n\t\t\t\t\t\telse return;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t\t\t// If server fails, log user out\r\n\t\t\t\t\t\tthis.props.sessionExpired();\r\n\t\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\tpublic render() {\r\n\t\treturn !this.props.isAuthenticated ? (\r\n\t\t\t<Redirect to=\"/login\" />\r\n\t\t) : (\r\n\t\t\t<Route {...this.props} />\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\r\n\tsessionExpired: () => dispatch({ type: ActionTypes.logoutUser })\r\n});\r\n\r\nexport default connect(null, mapDispatchToProps)(PrivateRoute);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { postLogin } from \"../../../actions\";\r\nimport { StoreState } from \"../../../reducers\";\r\nimport Spinner from \"../../utils/Spinner/Spinner\";\r\nimport { Link } from \"react-router-dom\";\r\nimport classes from \"./Login.module.scss\";\r\nimport { RouterProps } from \"react-router\";\r\n\r\ninterface Props extends StoreState, RouterProps {\r\n\tpostLogin: (email: string, password: string) => Promise<void>;\r\n}\r\ninterface State {\r\n\temail: string;\r\n\tpassword: string;\r\n\tloading: boolean;\r\n\tpathname: string;\r\n}\r\n\r\nclass Login extends Component<Props, State> {\r\n\tstate = {\r\n\t\temail: \"\",\r\n\t\tpassword: \"\",\r\n\t\tloading: false,\r\n\t\tpathname: this.props.history.location.pathname\r\n\t};\r\n\r\n\thandleChange = (e: { target: HTMLInputElement }) => {\r\n\t\tthis.setState({\r\n\t\t\t...this.state,\r\n\t\t\t[e.target.name]: e.target.value\r\n\t\t});\r\n\t};\r\n\r\n\thandleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n\t\te.preventDefault();\r\n\t\tconst { email, password } = this.state;\r\n\t\t// Set loading to true which adds spinner\r\n\t\tthis.setState({ loading: true });\r\n\t\t// Login user\r\n\t\tthis.props.postLogin(email, password).then(() => {\r\n\t\t\t// Refresh form if authentication fails\r\n\t\t\tif (this.props.history.location.pathname === this.state.pathname)\r\n\t\t\t\tthis.setState({ email: \"\", password: \"\", loading: false });\r\n\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className={classes.page}>\r\n\t\t\t\t<Link className={classes.homeLink} to=\"/\">\r\n\t\t\t\t\t<button>{`<<`}</button>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<div className={classes.container}>\r\n\t\t\t\t\t<h1>Login</h1>\r\n\t\t\t\t\t<form className={classes.form} onSubmit={this.handleSubmit}>\r\n\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t<span>Email:</span>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\t\tvalue={this.state.email}\r\n\t\t\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t<span>Password:</span>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\tvalue={this.state.password}\r\n\t\t\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t\t\t\tminLength={6}\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t{this.state.loading ? (\r\n\t\t\t\t\t\t\t<div className={classes.spinner}>\r\n\t\t\t\t\t\t\t\t<Spinner />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<button className={classes.loginBtn}>Login</button>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName={classes.registerBtn}\r\n\t\t\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\tthis.props.history.push(\"/register\");\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tSign Up{\" \"}\r\n\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t<Link className={classes.link} to=\"/forgotpassword\">\r\n\t\t\t\t\t\t\t\t\tForgot your password?\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state: StoreState) => ({\r\n\tauth: state.auth\r\n});\r\n\r\nexport default connect(mapStateToProps, { postLogin })(Login);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouterProps } from \"react-router\";\r\nimport classes from \"./ChangePassword.module.scss\";\r\nimport { changePassword } from \"../../../actions\";\r\nimport Spinner from \"../../utils/Spinner/Spinner\";\r\nimport { StoreState } from \"../../../reducers\";\r\n\r\ninterface Props extends StoreState, RouterProps {\r\n\tchangePassword: (form: ChangePassForm) => Promise<void>;\r\n}\r\n\r\nexport interface ChangePassForm {\r\n\tcurrentPassword: string;\r\n\tnewPassword: string;\r\n\tconfirmPassword: string;\r\n}\r\ninterface State extends ChangePassForm {\r\n\tloading: boolean;\r\n}\r\n\r\nclass ChangePassword extends Component<Props, State> {\r\n\tstate = {\r\n\t\tcurrentPassword: \"\",\r\n\t\tnewPassword: \"\",\r\n\t\tconfirmPassword: \"\",\r\n\t\tloading: false\r\n\t};\r\n\r\n\thandleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n\t\te.preventDefault();\r\n\t\tthis.setState({ loading: true });\r\n\r\n\t\tconst { currentPassword, newPassword, confirmPassword } = this.state;\r\n\t\tthis.props\r\n\t\t\t.changePassword({\r\n\t\t\t\tcurrentPassword,\r\n\t\t\t\tnewPassword,\r\n\t\t\t\tconfirmPassword\r\n\t\t\t})\r\n\t\t\t.then(() => {\r\n\t\t\t\t// If error\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tcurrentPassword: \"\",\r\n\t\t\t\t\tnewPassword: \"\",\r\n\t\t\t\t\tconfirmPassword: \"\",\r\n\t\t\t\t\tloading: false\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className={classes.container}>\r\n\t\t\t\t<h1 className={classes.title}>Change Password</h1>\r\n\t\t\t\t<form className={classes.form} onSubmit={this.handleSubmit}>\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\t<span>Current Password:</span>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tname=\"currentPassword\"\r\n\t\t\t\t\t\t\tvalue={this.state.currentPassword}\r\n\t\t\t\t\t\t\tonChange={e => this.setState({ currentPassword: e.target.value })}\r\n\t\t\t\t\t\t\tminLength={6}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\t<span>New Password:</span>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tname=\"newPassword\"\r\n\t\t\t\t\t\t\tvalue={this.state.newPassword}\r\n\t\t\t\t\t\t\tonChange={e => this.setState({ newPassword: e.target.value })}\r\n\t\t\t\t\t\t\tminLength={6}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\t<span>Confirm New Password:</span>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tname=\"confirmPassword\"\r\n\t\t\t\t\t\t\tvalue={this.state.confirmPassword}\r\n\t\t\t\t\t\t\tonChange={e => this.setState({ confirmPassword: e.target.value })}\r\n\t\t\t\t\t\t\tminLength={6}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t{this.state.loading ? (\r\n\t\t\t\t\t\t<div className={classes.spinner}>\r\n\t\t\t\t\t\t\t<Spinner />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<input type=\"submit\" value=\"Change Password\" />\r\n\t\t\t\t\t)}\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state: StoreState) => ({\r\n\tauth: state.auth\r\n});\r\n\r\nexport default connect(mapStateToProps, { changePassword })(ChangePassword);\r\n","export const checkAmount = (amount: number) => {\r\n\tlet newAmount = \"$\" + amount.toFixed(2);\r\n\tif (amount < 0) {\r\n\t\tnewAmount = newAmount.replace(\"$-\", \"-$\");\r\n\t}\r\n\treturn newAmount;\r\n};\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\nimport InfiniteScroll from \"react-infinite-scroller\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\nimport { checkAmount } from \"../../utils/CheckAmount\";\r\nimport classes from \"./Table.module.scss\";\r\nimport { ITransactionResult } from \"../../../reducers/transactions\";\r\nimport { IBudget, ITransaction } from \"../../../actions\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n\ttransactions: ITransactionResult[];\r\n\tcurrentBudget: IBudget;\r\n\tgetTransactions: (\r\n\t\tbudgetId: string,\r\n\t\tpageNumber?: number,\r\n\t\tsetHasMore?: (hasMore: boolean) => void\r\n\t) => Promise<void>;\r\n}\r\ninterface State {\r\n\tpageNumber: number;\r\n\thasMore: boolean;\r\n\tselectedId?: string;\r\n\tlatestClick: number;\r\n}\r\n\r\nclass Table extends Component<Props, State> {\r\n\tstate = {\r\n\t\tpageNumber: 1,\r\n\t\thasMore: true,\r\n\t\tselectedId: \"\",\r\n\t\tlatestClick: new Date().getTime()\r\n\t};\r\n\t// A method to be push to the action creator\r\n\t// This checks if there are results from server,\r\n\t// if not there are no more pages left\r\n\tsetHasMore = (hasMore: boolean) => {\r\n\t\tthis.setState({ hasMore });\r\n\t};\r\n\r\n\tloadMore = () => {\r\n\t\tconst { pageNumber, hasMore } = this.state;\r\n\t\tif (hasMore) {\r\n\t\t\t// Stop repeated execution\r\n\t\t\tthis.setState({ hasMore: false });\r\n\t\t\tconst nextPage = pageNumber + 1;\r\n\t\t\tif (this.props.currentBudget._id)\r\n\t\t\t\t// Set new transactions based on page\r\n\t\t\t\tthis.props.getTransactions(\r\n\t\t\t\t\tthis.props.currentBudget._id,\r\n\t\t\t\t\tnextPage,\r\n\t\t\t\t\tthis.setHasMore\r\n\t\t\t\t);\r\n\t\t\t// Set new page before request even finish\r\n\t\t\tthis.setState({ pageNumber: nextPage });\r\n\t\t}\r\n\t};\r\n\r\n\thandleClick = (transactionId: string) => {\r\n\t\t// Create double click/tap function\r\n\t\tconst now = new Date().getTime();\r\n\t\tconst timesince = now - this.state.latestClick;\r\n\t\tif (this.state.selectedId === transactionId) {\r\n\t\t\tif (timesince < 800 && timesince > 0) {\r\n\t\t\t\t// double tap\r\n\t\t\t\tthis.props.history.push(\r\n\t\t\t\t\t`/user/transactions/${this.props.currentBudget._id}/edit/${transactionId}`\r\n\t\t\t\t);\r\n\t\t\t} // one tap\r\n\t\t\telse\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tselectedId: \"\"\r\n\t\t\t\t});\r\n\t\t} // different transaction\r\n\t\telse\r\n\t\t\tthis.setState({\r\n\t\t\t\tselectedId: transactionId\r\n\t\t\t});\r\n\r\n\t\t// Set new latestClick\r\n\t\tthis.setState({\r\n\t\t\tlatestClick: new Date().getTime()\r\n\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { currentBudget, transactions } = this.props;\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<span className={classes.tip}>Double click to edit a transaction</span>\r\n\t\t\t\t<table className={classes.table}>\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr className={classes.heading}>\r\n\t\t\t\t\t\t\t<th>Date</th>\r\n\t\t\t\t\t\t\t<th>Description</th>\r\n\t\t\t\t\t\t\t<th>Amount($AUD)</th>\r\n\t\t\t\t\t\t\t<th className={classes.mobileTableHead}>Category</th>\r\n\t\t\t\t\t\t\t<th className={classes.mobileTableHead}>Balance</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<InfiniteScroll\r\n\t\t\t\t\t\telement=\"tbody\"\r\n\t\t\t\t\t\tloadMore={this.loadMore}\r\n\t\t\t\t\t\thasMore={this.state.hasMore}\r\n\t\t\t\t\t\tthreshold={50}\r\n\t\t\t\t\t\tloader={\r\n\t\t\t\t\t\t\t<tr className={classes.loader} key={0}>\r\n\t\t\t\t\t\t\t\t<td>Loading ...</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t{transactions.map(group => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<React.Fragment key={group._id.month + group._id.year}>\r\n\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t<td className={classes.groupDate} colSpan={5}>\r\n\t\t\t\t\t\t\t\t\t\t\t{moment(group._id.month, \"MM\").format(\"MMMM\")}{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t{group._id.year}\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t{group.transactions.map((t: ITransaction, i: number) => {\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t//When double clicked redirect to edit transaction page!\r\n\t\t\t\t\t\t\t\t\t\t\t<tr\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.selectedId === t._id\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? classes.transactionSelected\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: classes.transaction\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => t._id && this.handleClick(t._id)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{moment\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.utc(t.date)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.format(\"DD MMM\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.toUpperCase()}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{t.desc}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{this.state.selectedId === t._id && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className={classes.mobileTableCategory}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{currentBudget.categories[t.categoryIndex]}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<td>{checkAmount(t.amount)}</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<td className={classes.mobileTableData}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{currentBudget.categories[t.categoryIndex]}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<td className={classes.mobileTableData}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{checkAmount(t.balance)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</InfiniteScroll>\r\n\t\t\t\t</table>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withRouter(Table);\r\n","import React, { Component } from \"react\";\r\nimport * as d3 from \"d3\";\r\nimport { select } from \"d3\";\r\nimport d3Tip from \"d3-tip\";\r\nimport moment from \"moment\";\r\nimport { BudgetStats } from \"../../../reducers/charts\";\r\nimport classes from \"./BarGraph.module.scss\";\r\nimport { checkAmount } from \"../../utils/CheckAmount\";\r\n\r\ninterface Props {\r\n\tbarGraph: BudgetStats[];\r\n\tchangeMonth: (month: number) => void;\r\n}\r\ninterface State {\r\n\tloading: boolean;\r\n\tyear: number;\r\n}\r\n\r\nclass BarGraph extends Component<Props, State> {\r\n\tcanvas = React.createRef<HTMLDivElement>();\r\n\tstate = {\r\n\t\tloading: true,\r\n\t\tyear: new Date().getFullYear()\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst data = this.props.barGraph;\r\n\r\n\t\tconst margin = {\r\n\t\t\ttop: 10,\r\n\t\t\tright: 10,\r\n\t\t\tbottom: 25,\r\n\t\t\tleft: 100 // To fix y-axis\r\n\t\t};\r\n\r\n\t\tif (window.screen.width < 600) margin.left = 75;\r\n\t\tif (window.screen.width < 450) margin.left = 50;\r\n\r\n\t\tconst width = this.canvas.current ? this.canvas.current.offsetWidth : 800;\r\n\t\tconst height = this.canvas.current ? this.canvas.current.offsetHeight : 500;\r\n\r\n\t\tconst barSpacing =\r\n\t\t\twindow.screen.width > 450 ? 10 : window.screen.width > 400 ? 5 : 3;\r\n\t\t// Selectors\r\n\t\tconst svg = select(this.canvas.current)\r\n\t\t\t.append(\"svg\")\r\n\t\t\t.attr(\"width\", \"100%\")\r\n\t\t\t.attr(\"height\", \"100%\")\r\n\t\t\t.attr(\"viewBox\", `0 0 ${width}  ${height}`)\r\n\t\t\t.attr(\"preserveAspectRatio\", \"xMinYMin meet\");\r\n\r\n\t\t// Ensures responsiveness to the screen's width\r\n\r\n\t\tconst canvasWidth = svg.node()?.getBoundingClientRect().width || 800;\r\n\t\tconst canvasHeight = svg.node()?.getBoundingClientRect().height || 500;\r\n\r\n\t\t// give space to axis\r\n\t\tconst graphWidth = canvasWidth - margin.left - margin.right;\r\n\t\tconst graphHeight = canvasHeight - margin.top - margin.bottom;\r\n\r\n\t\tconst graph = svg\r\n\t\t\t.append(\"g\")\r\n\t\t\t.attr(\"width\", graphWidth)\r\n\t\t\t.attr(\"height\", graphHeight)\r\n\t\t\t.attr(\"transform\", `translate(${margin.left}, ${margin.top})`);\r\n\r\n\t\tconst xAxisGroup = graph\r\n\t\t\t.append(\"g\")\r\n\t\t\t.attr(\"transform\", `translate(0,${graphHeight})`)\r\n\t\t\t.style(\"font-size\", \"12px\");\r\n\t\tconst yAxisGroup = graph.append(\"g\").style(\"font-size\", \"12px\");\r\n\r\n\t\t// scales for data\r\n\t\tconst y = d3.scaleLinear().range([graphHeight, 0]);\r\n\r\n\t\tconst x = d3\r\n\t\t\t.scaleBand<number>()\r\n\t\t\t.range([0, graphWidth])\r\n\t\t\t.paddingOuter(0.2);\r\n\r\n\t\t// Set domains\r\n\t\tconst xMax = d3.max(data, d => d.balance);\r\n\t\ty.domain([0, xMax as number]);\r\n\r\n\t\tx.domain([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]);\r\n\r\n\t\t// Prevent empty value max tick\r\n\t\tconst ticks = y.ticks(),\r\n\t\t\tlastTick = ticks[ticks.length - 1],\r\n\t\t\tnewLastTick = lastTick + (ticks[1] - ticks[0]);\r\n\t\t// If last tick is lower than max value\r\n\t\tif (lastTick < y.domain()[1]) {\r\n\t\t\tticks.push(newLastTick);\r\n\t\t}\r\n\t\t// Set new domain with new max value tick\r\n\t\ty.domain([y.domain()[0], newLastTick]);\r\n\r\n\t\t// create the axis\r\n\t\tconst xAxis = d3\r\n\t\t\t.axisBottom(x)\r\n\t\t\t.tickFormat(d => moment(d.toString(), \"MM\").format(\"MMM\"));\r\n\t\tconst yAxis = d3\r\n\t\t\t.axisLeft(y)\r\n\t\t\t.ticks(3)\r\n\t\t\t.tickValues(ticks)\r\n\t\t\t.tickFormat(d => \"$\" + d);\r\n\r\n\t\t// Mousseover tooltip\r\n\t\tconst tip = (d3Tip as Function)()\r\n\t\t\t.attr(\"class\", classes.toolTip)\r\n\t\t\t.offset(window.screen.width > 450 ? [-10, 0] : [-1, 0])\r\n\t\t\t.html((d: BudgetStats) => {\r\n\t\t\t\treturn `<div><strong>Balance: </strong> <span>${checkAmount(\r\n\t\t\t\t\td.balance\r\n\t\t\t\t)}</span></div>\r\n\t\t\t\t\t<div><strong>Income: </strong> <span>${checkAmount(d.income)}</span></div>\r\n\t\t\t\t\t<div><strong>Expense: </strong> <span>${checkAmount(d.expense)}</span></div>\r\n\t\t\t\r\n\t\t\t`;\r\n\t\t\t});\r\n\t\tgraph.call(tip); // apply tip to all graph group\r\n\r\n\t\t// Enter selection\r\n\t\tgraph\r\n\t\t\t.selectAll(\"rect\")\r\n\t\t\t.data(data)\r\n\t\t\t.enter()\r\n\t\t\t.append(\"rect\")\r\n\t\t\t.attr(\"fill\", \"rgb(0, 153, 255)\")\r\n\t\t\t.attr(\"x\", d => {\r\n\t\t\t\tconst val = x(d._id.month);\r\n\t\t\t\tif (val) return val;\r\n\t\t\t\telse return d._id.month;\r\n\t\t\t})\r\n\t\t\t// Creates space based on index\r\n\t\t\t.attr(\"width\", graphWidth / 12 - barSpacing)\r\n\t\t\t.attr(\"y\", d => y(d.balance))\r\n\t\t\t.attr(\"height\", d => graphHeight - y(d.balance))\r\n\t\t\t.style(\"cursor\", \"pointer\")\r\n\t\t\t.on(\"mouseover\", (event, d) => {\r\n\t\t\t\ttip.show(d, event.currentTarget);\r\n\t\t\t})\r\n\t\t\t.on(\"mouseout\", (event, d) => {\r\n\t\t\t\ttip.hide(d, event.currentTarget);\r\n\t\t\t})\r\n\t\t\t.on(\"click\", (event, d) => this.props.changeMonth(d._id.month));\r\n\r\n\t\t// Call axis\r\n\t\txAxisGroup.call(xAxis);\r\n\t\tyAxisGroup.call(yAxis);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn <div className={classes.canvas} ref={this.canvas}></div>;\r\n\t}\r\n}\r\n\r\nexport default BarGraph;\r\n","import React, { Component } from \"react\";\r\nimport * as d3 from \"d3\";\r\nimport classes from \"./PieGraph.module.scss\";\r\nimport { BudgetCategoryData } from \"../../../reducers/charts\";\r\nimport { IBudget } from \"../../../actions\";\r\nimport { graph } from \"./graph\";\r\n\r\nexport enum PieGraphType {\r\n\tincome = \"income\",\r\n\texpense = \"expense\"\r\n}\r\n\r\ninterface Props {\r\n\ttype: PieGraphType;\r\n\tpieGraph: BudgetCategoryData[];\r\n\tcurrentBudget: IBudget;\r\n\tbudgetId: string;\r\n}\r\ninterface State {\r\n\tremoveGraph: boolean;\r\n}\r\n\r\nconst size = 250;\r\nconst extraSpace = 20;\r\nlet svg: d3.Selection<SVGSVGElement, unknown, null, undefined>;\r\n\r\n\r\nclass PieGraph extends Component<Props, State> {\r\n\tcanvas = React.createRef<HTMLDivElement>();\r\n\ttooltip = React.createRef<HTMLDivElement>();\r\n\tstate = {\r\n\t\tremoveGraph: false\r\n\t};\r\n\tnCategoriesByType = window.screen.width < 700 ? this.props.pieGraph.filter(p => p[this.props.type] !== 0).length : this.props.pieGraph.length;\r\n\tlegendHeight = (this.nCategoriesByType * 20);\r\n\t// dimension of the pie chart\r\n\tdims = { height: size, width: size, radius: size / 2 };\r\n\tcentre = {\r\n\t\tx: (this.dims.width + extraSpace) / 2,\r\n\t\ty: (this.dims.height + extraSpace) / 2\r\n\t};\r\n\r\n\tcomponentDidUpdate(prevProps: Props) {\r\n\t\tconst nCategoriesByType = window.screen.width < 700 ? this.props.pieGraph.filter(p => p[this.props.type] !== 0).length : this.props.pieGraph.length;\r\n\t\tconst legendHeight = (nCategoriesByType * 20);\r\n\t\tconst dims = { height: size, width: size, radius: size / 2 };\r\n\t\tconst centre = {\r\n\t\t\tx: (dims.width + extraSpace) / 2,\r\n\t\t\ty: (dims.height + extraSpace) / 2\r\n\t\t};\r\n\r\n\t\tif (!this.state.removeGraph) {\r\n\t\t\td3.select(this.canvas.current)\r\n\t\t\t\t.select(\"svg\")\r\n\t\t\t\t.attr(\"width\", dims.width + extraSpace)\r\n\t\t\t\t.attr(\"height\", dims.height + legendHeight + extraSpace)\r\n\t\t\t\t.select(\"g\")\r\n\t\t\t\t.attr(\"transform\", `translate(${centre.x}, ${centre.y + legendHeight})`)\r\n\t\t}\r\n\r\n\t\tif (prevProps.pieGraph !== this.props.pieGraph) {\r\n\t\t\t// Update graph\r\n\t\t\t// Append group and centres pieGraph svg path\r\n\t\t\tgraph(this, size, extraSpace, legendHeight);\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\t// Initialise canvas\r\n\t\tsvg = d3\r\n\t\t\t.select(this.canvas.current)\r\n\t\t\t.append(\"svg\")\r\n\t\t\t.attr(\"width\", this.dims.width + extraSpace)\r\n\t\t\t.attr(\"height\", this.dims.height + this.legendHeight + extraSpace);\r\n\r\n\t\tsvg.append(\"g\").attr(\"transform\", `translate(${this.centre.x}, ${this.centre.y + this.legendHeight})`);\r\n\t\t// Render graph\r\n\t\tgraph(this, size, extraSpace, this.legendHeight);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t!this.state.removeGraph && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div ref={this.tooltip} className={classes.toolTip}>\r\n\t\t\t\t\t\t<span id=\"pieGraphTip\"></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className={classes.chart}>\r\n\t\t\t\t\t\t<h1 className={classes.title}>{this.props.type}</h1>\r\n\t\t\t\t\t\t<div className={classes.canvas} ref={this.canvas}></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</>\r\n\t\t\t)\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default PieGraph;\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps } from \"react-router\";\r\nimport classes from \"./Budget.module.scss\";\r\nimport { StoreState } from \"../../../reducers\";\r\nimport {\r\n\tgetTransactions,\r\n\tgetBudget,\r\n\tgetAllBudget,\r\n\tsetAlert,\r\n\tAlertType\r\n} from \"../../../actions\";\r\nimport Spinner from \"../../utils/Spinner/Spinner\";\r\nimport { checkAmount } from \"../../utils/CheckAmount\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Table from \"../../pages/Table/Table\";\r\nimport Graphs from \"../../pages/Graphs/Graphs\";\r\nimport { FaRegEdit, FaTable } from \"react-icons/fa\";\r\nimport { GoGraph } from \"react-icons/go\";\r\n\r\ninterface Params {\r\n\tbudgetId: string;\r\n}\r\ninterface Props extends StoreState, RouteComponentProps<Params> {\r\n\tgetTransactions: (budgetId: string, pageNumber?: number) => Promise<void>;\r\n\tsetAlert: (msg: string, alertType: AlertType) => void;\r\n\tgetBudget: (budgetId: string) => Promise<void>;\r\n\tgetAllBudget: () => Promise<void>;\r\n\tstopLoading: () => void;\r\n}\r\n\r\nenum Nav {\r\n\ttransactions,\r\n\tgraph\r\n}\r\n\r\ninterface State {\r\n\tloading: boolean;\r\n\tnav: Nav;\r\n\tbudgetId?: string;\r\n}\r\n\r\nclass Dashboard extends Component<Props, State> {\r\n\tstate = {\r\n\t\tloading: true,\r\n\t\tnav: Nav.transactions,\r\n\t\tbudgetId: \"\"\r\n\t};\r\n\r\n\tcomponentDidUpdate(prevProps: Props) {\r\n\t\tif (this.props.location !== prevProps.location) {\r\n\t\t\t// set initial state\r\n\t\t\tthis.setState({\r\n\t\t\t\tloading: true,\r\n\t\t\t\tnav: Nav.transactions,\r\n\t\t\t\tbudgetId: this.props.match.params.budgetId\r\n\t\t\t});\r\n\t\t\tconst budgetId = this.props.match.params.budgetId;\r\n\t\t\tthis.props.getBudget(budgetId).then(() => {\r\n\t\t\t\t// Load transactions\r\n\t\t\t\tthis.props.getTransactions(budgetId).then(() => {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tloading: false\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\t// Load budgets first\r\n\t\t// If default -------------------- JUST AFTER LOGGING IN ----------------------------\r\n\t\t// Check if it doesn't have any params then its default just after logging in\r\n\t\tif (!this.props.match.params.budgetId) {\r\n\t\t\tthis.props.getAllBudget().then(() => {\r\n\t\t\t\t// Stop loading state from Container component\r\n\t\t\t\t//  Mainly to let container know that budget list has loaded\r\n\t\t\t\tthis.props.stopLoading();\r\n\r\n\t\t\t\t// After loading budget check if user already has budgets listed\r\n\t\t\t\tif (this.props.budgets.length > 0) {\r\n\t\t\t\t\tthis.setState({ budgetId: this.props.budgets[0]._id });\r\n\t\t\t\t\tconst budgetId = this.state.budgetId;\r\n\t\t\t\t\t// Load first budget\r\n\t\t\t\t\tthis.props.getBudget(budgetId).then(() => {\r\n\t\t\t\t\t\t// Load transactions\r\n\t\t\t\t\t\tthis.props.getTransactions(budgetId).then(() => {\r\n\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\tloading: false\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (this.props.budgets.length === 0 && !this.state.budgetId)\r\n\t\t\t\t\tthis.props.history.push(this.props.match.path + \"/budget/new\");\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\t// ----------------------OTHERWISE LOAD USING PARAMS--------------------\r\n\t\t\tthis.setState({ budgetId: this.props.match.params.budgetId });\r\n\t\t\tconst budgetId = this.props.match.params.budgetId;\r\n\t\t\tif (budgetId) {\r\n\t\t\t\tthis.props.getBudget(budgetId).then(() => {\r\n\t\t\t\t\t// Load transactions\r\n\t\t\t\t\tthis.props.getTransactions(budgetId).then(() => {\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\tloading: false\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst budget = this.props.currentBudget;\r\n\t\tconst transactions = this.props.transactions;\r\n\r\n\t\treturn budget && !this.state.loading ? (\r\n\t\t\t<div className={classes.container}>\r\n\t\t\t\t<div className={classes.budget}>\r\n\t\t\t\t\t<h2 className={classes.budgetName}>Budget: {budget.name}</h2>\r\n\r\n\t\t\t\t\t<div className={classes.budgetBalance}>\r\n\t\t\t\t\t\t<h3>Balance: {checkAmount(budget.balance)}</h3>\r\n\t\t\t\t\t\t<span>Starting Balance: {checkAmount(budget.startingBalance)}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName={classes.mobileEditBudget}\r\n\t\t\t\t\t\tonClick={() => this.props.history.push(\"/user/budget/edit\")}>\r\n\t\t\t\t\t\t<FaRegEdit /> Edit Budget\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t{transactions.length > 0 ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<div className={classes.nav}>\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\t\t\tthis.state.nav === Nav.transactions ? classes.navSelected : \"\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tonClick={() => this.setState({ nav: Nav.transactions })}>\r\n\t\t\t\t\t\t\t\t<FaTable /> Transactions\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t&nbsp; | &nbsp;\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\t\t\tthis.state.nav === Nav.graph ? classes.navSelected : \"\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tonClick={() => this.setState({ nav: Nav.graph })}>\r\n\t\t\t\t\t\t\t\t<GoGraph /> Graph\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{/**Only show transactions here */}\r\n\t\t\t\t\t\t{this.state.nav === Nav.transactions ? (\r\n\t\t\t\t\t\t\t<Table\r\n\t\t\t\t\t\t\t\ttransactions={this.props.transactions}\r\n\t\t\t\t\t\t\t\tcurrentBudget={this.props.currentBudget}\r\n\t\t\t\t\t\t\t\tgetTransactions={this.props.getTransactions}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Graphs budgetId={this.state.budgetId} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div className={classes.addTransactions}>\r\n\t\t\t\t\t\t<span>No transactions listed.</span>\r\n\t\t\t\t\t\t<Link to={`/user/transactions/new`}>Add one now!</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t) : (\r\n\t\t\t<div className={classes.container}>\r\n\t\t\t\t<Spinner />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state: StoreState) => ({\r\n\tauth: state.auth,\r\n\talerts: state.alerts,\r\n\tbudgets: state.budgets,\r\n\tcurrentBudget: state.currentBudget,\r\n\ttransactions: state.transactions,\r\n\tcharts: state.charts\r\n});\r\n\r\nexport default connect(mapStateToProps, {\r\n\tgetTransactions,\r\n\tsetAlert,\r\n\tgetBudget,\r\n\tgetAllBudget\r\n})(Dashboard);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { getStats, getCategoryData, getDates } from \"../../../actions\";\r\nimport { StoreState } from \"../../../reducers\";\r\nimport BarGraph from \"../BarGraph/BarGraph\";\r\nimport PieGraph, { PieGraphType } from \"../PieGraph/PieGraph\";\r\nimport classes from \"./Graphs.module.scss\";\r\nimport Spinner from \"../../utils/Spinner/Spinner\";\r\nimport moment from \"moment\";\r\n\r\ninterface Props extends StoreState {\r\n\tbudgetId: string;\r\n\tgetStats: (budgetId: string, year: number) => Promise<void>;\r\n\tgetCategoryData: (\r\n\t\tbudgetId: string,\r\n\t\tyear: number,\r\n\t\tmonth?: number\r\n\t) => Promise<void>;\r\n\tgetDates: (budgetId: string) => Promise<void>;\r\n}\r\ninterface State {\r\n\tloading: boolean;\r\n\tyear: number;\r\n\tmonth: number;\r\n}\r\n\r\nclass Graphs extends Component<Props, State> {\r\n\tstate = {\r\n\t\tloading: true,\r\n\t\t//Initial state is based on latest transaction\r\n\t\tyear: parseInt(\r\n\t\t\tmoment\r\n\t\t\t\t.utc(this.props.transactions[0].transactions[0].date)\r\n\t\t\t\t.format(\"YYYY\"),\r\n\t\t\t10\r\n\t\t),\r\n\t\tmonth: 0\r\n\t};\r\n\r\n\tasync getData(budgetId: string, year: number) {\r\n\t\t// For bar graph data (income, expenses, balance by month and year)\r\n\t\tawait this.props.getStats(budgetId, year);\r\n\t\t// For pie graph data (income, expenses, categoryIndex by year or with month)\r\n\t\tawait this.props.getCategoryData(budgetId, year);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst { budgetId } = this.props;\r\n\t\tconst { year } = this.state;\r\n\t\t// Initialise store state\r\n\t\tthis.getData(budgetId, year).then(() => {\r\n\t\t\tthis.setState({ loading: false });\r\n\t\t});\r\n\t\t// For drop down list of years\r\n\t\tthis.props.getDates(budgetId);\r\n\t}\r\n\r\n\thandleYearChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n\t\t// Change year on drop down list\r\n\t\tconst { budgetId } = this.props;\r\n\t\tconst year = parseInt(e.target.value, 10);\r\n\t\t// Set year on state and show loading spinner\r\n\t\tthis.setState({ year, loading: true });\r\n\t\t// Update bar graph, pie graph\r\n\t\tthis.getData(budgetId, year).then(() => {\r\n\t\t\tthis.setState({ loading: false });\r\n\t\t});\r\n\t};\r\n\r\n\tchangeMonth = (month: number) => {\r\n\t\t// Change month on by clicking on bar graph\r\n\t\tconst { budgetId } = this.props;\r\n\t\tconst { year } = this.state;\r\n\t\tthis.props.getCategoryData(budgetId, year, month).then(() => {\r\n\t\t\tthis.setState({ month });\r\n\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst years = this.props.charts.dates.map(date => date._id.year);\r\n\t\treturn this.state.loading ? (\r\n\t\t\t<Spinner />\r\n\t\t) : (\r\n\t\t\t<div className={classes.container}>\r\n\t\t\t\t<div className={classes.barGraphHeading}>\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\t<h2>Annual data for</h2>\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\tname=\"Budgets\"\r\n\t\t\t\t\t\t\tvalue={this.state.year}\r\n\t\t\t\t\t\t\tonChange={this.handleYearChange}>\r\n\t\t\t\t\t\t\t{years.map(y => (\r\n\t\t\t\t\t\t\t\t<option key={y} value={y}>\r\n\t\t\t\t\t\t\t\t\t{y}\r\n\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</div>\r\n\t\t\t\t<span className={classes.barGraphTip}>\r\n\t\t\t\t\tClick graph to see category data by month\r\n\t\t\t\t</span>\r\n\t\t\t\t<BarGraph\r\n\t\t\t\t\tbarGraph={this.props.charts.barGraph}\r\n\t\t\t\t\tchangeMonth={this.changeMonth}\r\n\t\t\t\t/>\r\n\t\t\t\t<div className={classes.pieGraphGroup}>\r\n\t\t\t\t\t<h3>\r\n\t\t\t\t\t\tAmount by category for&nbsp;\r\n\t\t\t\t\t\t{this.state.month > 0\r\n\t\t\t\t\t\t\t? moment(this.state.month, \"MM\").format(\"MMMM\") +\r\n\t\t\t\t\t\t\t\" \" +\r\n\t\t\t\t\t\t\tthis.state.year\r\n\t\t\t\t\t\t\t: this.state.year}\r\n\t\t\t\t\t</h3>\r\n\t\t\t\t\t<span>Hover / tap each slice for more details</span>\r\n\t\t\t\t\t<div className={classes.pieGraph}>\r\n\t\t\t\t\t\t<PieGraph\r\n\t\t\t\t\t\t\ttype={PieGraphType.income}\r\n\t\t\t\t\t\t\tcurrentBudget={this.props.currentBudget}\r\n\t\t\t\t\t\t\tpieGraph={this.props.charts.pieGraph}\r\n\t\t\t\t\t\t\tbudgetId={this.props.budgetId}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<PieGraph\r\n\t\t\t\t\t\t\ttype={PieGraphType.expense}\r\n\t\t\t\t\t\t\tcurrentBudget={this.props.currentBudget}\r\n\t\t\t\t\t\t\tpieGraph={this.props.charts.pieGraph}\r\n\t\t\t\t\t\t\tbudgetId={this.props.budgetId}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<button onClick={() => this.changeMonth(0)}>\r\n\t\t\t\t\t\tGet the annual category data\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state: StoreState) => ({\r\n\tauth: state.auth,\r\n\talerts: state.alerts,\r\n\tbudgets: state.budgets,\r\n\tcurrentBudget: state.currentBudget,\r\n\ttransactions: state.transactions,\r\n\tcharts: state.charts\r\n});\r\n\r\nexport default connect(mapStateToProps, {\r\n\tgetStats,\r\n\tgetCategoryData,\r\n\tgetDates\r\n})(Graphs);\r\n","import { AnyAction } from \"redux\";\r\nimport {\r\n\tBudgetStats,\r\n\tBudgetCategoryData,\r\n\tBudgetDates\r\n} from \"./../reducers/charts\";\r\nimport { setAlert, AlertType } from \"./alerts\";\r\nimport axios from \"axios\";\r\nimport { ITransaction } from \"./transaction\";\r\nimport { ActionTypes } from \"./types\";\r\nimport catchAsync from \"../utils/catchAsync\";\r\nimport { AddBudgetForm } from \"./../components/pages/AddBudget/AddBudget\";\r\nimport { EditBudgetForm } from \"../components/pages/EditBudget/EditBudget\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { StoreState } from \"../reducers\";\r\n\r\nexport interface IBudget {\r\n\t_id?: string;\r\n\tname: string;\r\n\tcategories: string[];\r\n\tstartingBalance: number;\r\n\tbalance: number;\r\n\ttransactions?: ITransaction[];\r\n}\r\n\r\nexport interface AddBudgetAction {\r\n\ttype: ActionTypes.addBudget;\r\n\tpayload: IBudget;\r\n}\r\n\r\nexport interface GetAllBudgetAction {\r\n\ttype: ActionTypes.getAllBudget;\r\n\tpayload: IBudget[];\r\n}\r\n\r\nexport interface EditBudgetAction {\r\n\ttype: ActionTypes.editBudget;\r\n\tpayload: IBudget[];\r\n}\r\n\r\nexport interface DeleteBudgetAction {\r\n\ttype: ActionTypes.deleteBudget;\r\n\tpayload: IBudget;\r\n}\r\n\r\nexport interface GetBudgetAction {\r\n\ttype: ActionTypes.getBudget;\r\n\tpayload: IBudget;\r\n}\r\n\r\nexport interface GetStatsAction {\r\n\ttype: ActionTypes.getStats;\r\n\tpayload: BudgetStats[];\r\n}\r\n\r\nexport interface GetCategoryDataAction {\r\n\ttype: ActionTypes.getCategoryData;\r\n\tpayload: BudgetCategoryData[];\r\n}\r\n\r\nexport interface GetDatesAction {\r\n\ttype: ActionTypes.getDates;\r\n\tpayload: BudgetDates[];\r\n}\r\n\r\nexport const addBudget = (form: AddBudgetForm) =>\r\n\tcatchAsync(async dispatch => {\r\n\t\t// Add new budget\r\n\t\tconst res = await axios.post<IBudget>(\"/api/budget/new\", form);\r\n\r\n\t\tdispatch<AddBudgetAction>({\r\n\t\t\ttype: ActionTypes.addBudget,\r\n\t\t\tpayload: res.data\r\n\t\t});\r\n\r\n\t\tdispatch(setAlert(`${form.name} budget added to list!`, AlertType.success));\r\n\t});\r\n\r\n// No alerts if failed to retrieve all budgets\r\n// Unnecessary to show alerts\r\n// So users who just signs up wont see the alerts\r\nexport const getAllBudget = () => async (\r\n\tdispatch: ThunkDispatch<StoreState, void, AnyAction>\r\n) => {\r\n\ttry {\r\n\t\tconst res = await axios.get<IBudget[]>(\"/api/budget/all\");\r\n\r\n\t\tdispatch<GetAllBudgetAction>({\r\n\t\t\ttype: ActionTypes.getAllBudget,\r\n\t\t\tpayload: res.data\r\n\t\t});\r\n\t} catch (error) {\r\n\t\tconsole.error(\"User does not have any budgets\");\r\n\t}\r\n};\r\n\r\nexport const editBudget = (budgetId: string, form: EditBudgetForm) =>\r\n\tcatchAsync(async dispatch => {\r\n\t\tconst res = await axios.patch<IBudget[]>(\r\n\t\t\t`/api/budget/update/${budgetId}`,\r\n\t\t\tform\r\n\t\t);\r\n\r\n\t\tdispatch<EditBudgetAction>({\r\n\t\t\ttype: ActionTypes.editBudget,\r\n\t\t\tpayload: res.data\r\n\t\t});\r\n\r\n\t\tdispatch(\r\n\t\t\tsetAlert(`Budget ${form.name} successfully updated!`, AlertType.success)\r\n\t\t);\r\n\t});\r\n\r\nexport const deleteBudget = (budget: IBudget) =>\r\n\tcatchAsync(async dispatch => {\r\n\t\tawait axios.delete(`/api/budget/del/${budget._id}`);\r\n\r\n\t\tdispatch<DeleteBudgetAction>({\r\n\t\t\ttype: ActionTypes.deleteBudget,\r\n\t\t\tpayload: budget\r\n\t\t});\r\n\t\tdispatch(\r\n\t\t\tsetAlert(`Budget ${budget.name} successfully deleted!`, AlertType.success)\r\n\t\t);\r\n\t});\r\n\r\nexport const getBudget = (budgetId: string) =>\r\n\tcatchAsync(async dispatch => {\r\n\t\tconst res = await axios.get<IBudget>(`/api/budget/${budgetId}`);\r\n\r\n\t\tdispatch<GetBudgetAction>({\r\n\t\t\ttype: ActionTypes.getBudget,\r\n\t\t\tpayload: res.data\r\n\t\t});\r\n\t});\r\n\r\nexport const getStats = (budgetId: string, year: number) =>\r\n\tcatchAsync(async dispatch => {\r\n\t\tconst res = await axios.get<BudgetStats[]>(\r\n\t\t\t`/api/budget/stats/${budgetId}/year/${year}`\r\n\t\t);\r\n\r\n\t\tdispatch<GetStatsAction>({\r\n\t\t\ttype: ActionTypes.getStats,\r\n\t\t\tpayload: res.data\r\n\t\t});\r\n\t});\r\n\r\nexport const getCategoryData = (\r\n\tbudgetId: string,\r\n\tyear: number,\r\n\tmonth?: number\r\n) =>\r\n\tcatchAsync(async dispatch => {\r\n\t\tconst res = await axios.get<BudgetCategoryData[]>(\r\n\t\t\tmonth\r\n\t\t\t\t? `/api/budget/categories/${budgetId}/month/${month}/year/${year}`\r\n\t\t\t\t: // If only annual data required\r\n\t\t\t\t  `/api/budget/categories/${budgetId}/year/${year}`\r\n\t\t);\r\n\r\n\t\tdispatch<GetCategoryDataAction>({\r\n\t\t\ttype: ActionTypes.getCategoryData,\r\n\t\t\tpayload: res.data\r\n\t\t});\r\n\t});\r\n\r\nexport const getDates = (budgetId: string) =>\r\n\tcatchAsync(async dispatch => {\r\n\t\tconst res = await axios.get<BudgetDates[]>(`/api/budget/dates/${budgetId}`);\r\n\r\n\t\tdispatch<GetDatesAction>({\r\n\t\t\ttype: ActionTypes.getDates,\r\n\t\t\tpayload: res.data\r\n\t\t});\r\n\t});\r\n","import { setAlert, AlertType } from \"./alerts\";\r\nimport axios from \"axios\";\r\nimport { ActionTypes } from \"./types\";\r\nimport { IUser } from \"./user\";\r\nimport catchAsync from \"../utils/catchAsync\";\r\nimport { AddTransactionForm } from \"../components/pages/AddTransaction/AddTransaction\";\r\nimport { ITransactionResult } from \"../reducers/transactions\";\r\nimport { Dispatch } from \"redux\";\r\n\r\nexport interface ITransaction {\r\n\t_id?: string;\r\n\tdesc: string;\r\n\tuser?: IUser;\r\n\tdate: Date | string;\r\n\tcategoryIndex: number;\r\n\tamount: number;\r\n\tbalance: number;\r\n}\r\n\r\n// Transaction may be of any date!\r\n// Will need to refresh the transaction list\r\nexport interface AddTransactionAction {\r\n\ttype: ActionTypes.addTransaction;\r\n\tpayload: ITransactionResult[];\r\n}\r\n\r\nexport interface GetTransactionsAction {\r\n\ttype: ActionTypes.getTransactions;\r\n\tpayload: ITransactionResult[];\r\n}\r\n\r\nexport interface ClearTransactionsAction {\r\n\ttype: ActionTypes.clearTransactions;\r\n}\r\n\r\nexport const clearTransactions = () => (dispatch: Dispatch) => {\r\n\tdispatch<ClearTransactionsAction>({\r\n\t\ttype: ActionTypes.clearTransactions\r\n\t});\r\n};\r\n\r\nexport const getTransactions = (\r\n\tbudgetId: string,\r\n\tpageNumber: number = 1,\r\n\tsetHasMore?: (hasMore: boolean) => void\r\n) =>\r\n\tcatchAsync(async dispatch => {\r\n\t\t// If first page - clear list first\r\n\t\tif (pageNumber === 1)\r\n\t\t\tdispatch<ClearTransactionsAction>({\r\n\t\t\t\ttype: ActionTypes.clearTransactions\r\n\t\t\t});\r\n\r\n\t\tconst res = await axios.get<ITransactionResult[]>(\r\n\t\t\t`/api/transactions/${budgetId}?page=${pageNumber}&limit=20`\r\n\t\t);\r\n\r\n\t\tdispatch<GetTransactionsAction>({\r\n\t\t\ttype: ActionTypes.getTransactions,\r\n\t\t\tpayload: res.data\r\n\t\t});\r\n\r\n\t\t// Must be after dispatch\r\n\t\t// If this is called before dispatch, multiple calls will be executed\r\n\t\t// Many duplicate calls will happen as a result\r\n\t\tif (setHasMore) {\r\n\t\t\tif (res.data.length === 0) {\r\n\t\t\t\tsetHasMore(false);\r\n\t\t\t} else setHasMore(true);\r\n\t\t}\r\n\t});\r\n\r\nexport const addTransaction = (budgetId: string, form: AddTransactionForm) =>\r\n\tcatchAsync(async dispatch => {\r\n\t\tconst res = await axios.patch<ITransactionResult[]>(\r\n\t\t\t`/api/transactions/new/${budgetId}`,\r\n\t\t\tform\r\n\t\t);\r\n\r\n\t\tdispatch<AddTransactionAction>({\r\n\t\t\ttype: ActionTypes.addTransaction,\r\n\t\t\tpayload: res.data\r\n\t\t});\r\n\r\n\t\tdispatch(setAlert(\"New transaction added!\", AlertType.success));\r\n\t});\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport classes from \"./AddBudget.module.scss\";\r\nimport { addBudget, setAlert, AlertType } from \"../../../actions\";\r\nimport { StoreState } from \"../../../reducers\";\r\nimport { RouteComponentProps } from \"react-router\";\r\nimport Spinner from \"../../utils/Spinner/Spinner\";\r\nimport { FaMinusSquare, FaPlusSquare } from \"react-icons/fa\";\r\n\r\ninterface Props extends StoreState, RouteComponentProps {\r\n\taddBudget: (form: AddBudgetForm) => Promise<void>;\r\n\tsetAlert: (msg: string, alertType: AlertType) => void;\r\n\tselectBudget: (budgetIndex: number) => void;\r\n}\r\nexport interface AddBudgetForm {\r\n\tnCategories?: number;\r\n\tname: string;\r\n\tcategories: string[];\r\n\tstartingBalance: number;\r\n}\r\n\r\ninterface State extends AddBudgetForm {\r\n\tloading: boolean;\r\n}\r\n\r\nclass AddBudget extends Component<Props, State> {\r\n\tstate = {\r\n\t\tnCategories: 1,\r\n\t\tname: \"\",\r\n\t\tstartingBalance: 0,\r\n\t\tcategories: [\"\"],\r\n\t\tloading: false\r\n\t};\r\n\r\n\thandleSubmit = (e: React.FormEvent) => {\r\n\t\te.preventDefault();\r\n\t\tthis.setState({ loading: true });\r\n\t\tconst prevBudgetListLength = this.props.budgets.length;\r\n\t\tconst { name, startingBalance, categories } = this.state;\r\n\t\tthis.props.addBudget({ name, startingBalance, categories }).then(() => {\r\n\t\t\tthis.setState({ loading: false });\r\n\t\t\t// If successful\r\n\t\t\tif (this.props.budgets.length > prevBudgetListLength) {\r\n\t\t\t\t// Select new budget from Container component\r\n\t\t\t\tconst i = this.props.budgets.length - 1;\r\n\t\t\t\tthis.props.selectBudget(i);\r\n\t\t\t\t// Redirect to the budget\r\n\t\t\t\tconst budgetId = this.props.budgets[prevBudgetListLength]._id;\r\n\t\t\t\tthis.props.history.push(`/user/budget/${budgetId}`);\r\n\t\t\t}\r\n\t\t\t// /Reset form\r\n\t\t\telse\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tnCategories: 1,\r\n\t\t\t\t\tname: \"\",\r\n\t\t\t\t\tstartingBalance: 0,\r\n\t\t\t\t\tcategories: [\"\"]\r\n\t\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\taddCategories = (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\r\n\t\te.preventDefault();\r\n\t\t// Max categories is 8 due to the colour scheme of the pieGraph\r\n\t\tif (this.state.nCategories < 8) {\r\n\t\t\tconst categories = this.state.categories;\r\n\t\t\tconst nCategories = this.state.nCategories + 1;\r\n\t\t\tcategories.push(\"\");\r\n\r\n\t\t\tthis.setState({ nCategories, categories });\r\n\t\t\tthis.props.setAlert(\r\n\t\t\t\t\"Be careful when adding categories as these cannot be deleted after updating the budget.\",\r\n\t\t\t\tAlertType.info\r\n\t\t\t);\r\n\t\t} else\r\n\t\t\tthis.props.setAlert(\r\n\t\t\t\t\"Maximum number of categories reached!!\",\r\n\t\t\t\tAlertType.warning\r\n\t\t\t);\r\n\t};\r\n\r\n\tdelCategories = (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\r\n\t\te.preventDefault();\r\n\t\tconst nCategories = this.state.nCategories - 1;\r\n\t\tconst categories = this.state.categories;\r\n\t\t// Delete the last element of array and make it empty\r\n\t\tif (this.state.nCategories > 1) {\r\n\t\t\tcategories.pop();\r\n\t\t\tthis.setState({ nCategories, categories });\r\n\t\t}\r\n\t};\r\n\r\n\tonChangeCategory = (\r\n\t\te: React.ChangeEvent<HTMLInputElement>,\r\n\t\tindex: number\r\n\t) => {\r\n\t\tconst categories = this.state.categories;\r\n\t\tcategories[index] = e.target.value;\r\n\t\tthis.setState({ categories });\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst categoriesArray = [];\r\n\t\tfor (let i = 0; i < this.state.nCategories; i++) {\r\n\t\t\tcategoriesArray.push(\r\n\t\t\t\t<input\r\n\t\t\t\t\tkey={i}\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tmaxLength={20}\r\n\t\t\t\t\tonChange={e => this.onChangeCategory(e, i)}\r\n\t\t\t\t\tvalue={this.state.categories[i]}\r\n\t\t\t\t\trequired\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div className={classes.container}>\r\n\t\t\t\t<h1 className={classes.title}>Create new budget</h1>\r\n\t\t\t\t<form className={classes.form} onSubmit={this.handleSubmit}>\r\n\t\t\t\t\t<label className={classes.name}>\r\n\t\t\t\t\t\t<span>Budget name:</span>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tmaxLength={20}\r\n\t\t\t\t\t\t\tonChange={e => this.setState({ name: e.target.value })}\r\n\t\t\t\t\t\t\tvalue={this.state.name}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\t<span>Starting balance $:</span>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\tonChange={e =>\r\n\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\tstartingBalance:\r\n\t\t\t\t\t\t\t\t\t\te.target.value.length > 0 ? parseFloat(e.target.value) : 0\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvalue={\r\n\t\t\t\t\t\t\t\tthis.state.startingBalance === 0\r\n\t\t\t\t\t\t\t\t\t? \"\"\r\n\t\t\t\t\t\t\t\t\t: this.state.startingBalance\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<label className={classes.categories}>\r\n\t\t\t\t\t\t{categoriesArray}\r\n\t\t\t\t\t\t<div className={classes.btnCategories}>\r\n\t\t\t\t\t\t\t<span>Categories:</span>\r\n\r\n\t\t\t\t\t\t\t<button className={classes.btnGreen} onClick={this.addCategories}>\r\n\t\t\t\t\t\t\t\t<FaPlusSquare />\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button className={classes.btnDel} onClick={this.delCategories}>\r\n\t\t\t\t\t\t\t\t<FaMinusSquare />\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t{this.state.loading ? (\r\n\t\t\t\t\t\t<div className={classes.spinner}>\r\n\t\t\t\t\t\t\t<Spinner />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<input type=\"submit\" value=\"Submit\" />\r\n\t\t\t\t\t)}\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state: StoreState) => ({\r\n\tauth: state.auth,\r\n\talerts: state.alerts,\r\n\tbudgets: state.budgets,\r\n\tcurrentBudget: state.currentBudget,\r\n\ttransactions: state.transactions,\r\n\tcharts: state.charts\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\t{ addBudget, setAlert }\r\n)(AddBudget);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { addTransaction } from \"../../../actions\";\r\nimport DatePicker from \"react-datepicker\";\r\nimport classes from \"./AddTransaction.module.scss\";\r\nimport { StoreState } from \"../../../reducers\";\r\nimport Spinner from \"../../utils/Spinner/Spinner\";\r\nimport { RouteComponentProps } from \"react-router\";\r\n\r\n// Get budget based on budgetIndex option and then onChange retrieve data from budget state store\r\n// Set state of budget and set loading to false to stop spinner\r\n// Select will be the name of the budget from budgetStore array\r\n// budgetIndex value by default will be the first in the array eg. this.props.budgets[0].name\r\n\r\ninterface Params {\r\n\tbudgetId: string;\r\n}\r\n\r\ninterface Props extends StoreState, RouteComponentProps<Params> {\r\n\taddTransaction: (budgetId: string, form: AddTransactionForm) => Promise<void>;\r\n}\r\n\r\nexport interface AddTransactionForm {\r\n\tdesc: string;\r\n\tcategoryIndex: number;\r\n\tamount: number;\r\n\tdate: Date | string;\r\n}\r\n\r\ninterface State extends AddTransactionForm {\r\n\tbudgetIndex: number;\r\n\tmin: number;\r\n\tmax: number;\r\n\tloading: boolean;\r\n\tinit: boolean;\r\n}\r\nclass AddTransaction extends Component<Props, State> {\r\n\t// Initial state\r\n\tstate = {\r\n\t\tinit: true,\r\n\t\tbudgetIndex: 0,\r\n\t\tdesc: \"\",\r\n\t\tcategoryIndex: 0,\r\n\t\tamount: 0,\r\n\t\tmin: 0,\r\n\t\tmax: Infinity,\r\n\t\tdate: new Date(),\r\n\t\tloading: false\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\t// If params were provided\r\n\t\tif (this.props.currentBudget._id) {\r\n\t\t\tconst budgetId = this.props.currentBudget._id;\r\n\t\t\t// Find index -- expected to be small group (1-5)\r\n\t\t\tconst i = this.props.budgets.findIndex(b => b._id === budgetId);\r\n\t\t\tthis.setState({\r\n\t\t\t\tbudgetIndex: i,\r\n\t\t\t\tcategoryIndex: 0\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\thandleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n\t\te.preventDefault();\r\n\t\tthis.setState({\r\n\t\t\tloading: true\r\n\t\t});\r\n\t\tconst { budgetIndex, desc, categoryIndex, amount, date } = this.state;\r\n\t\tconst budget = this.props.budgets[budgetIndex];\r\n\t\t// Need to convert date to ISO format before sending to server otherwise, it will send incorrect date\r\n\t\tconst isoDate = date.toISOString();\r\n\t\tif (budget._id)\r\n\t\t\tthis.props\r\n\t\t\t\t.addTransaction(budget._id, {\r\n\t\t\t\t\tdesc,\r\n\t\t\t\t\tcategoryIndex,\r\n\t\t\t\t\tamount,\r\n\t\t\t\t\tdate: isoDate\r\n\t\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\t// Reset form and stop loading\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tloading: false,\r\n\t\t\t\t\t\tdesc: \"\",\r\n\t\t\t\t\t\tcategoryIndex: 0,\r\n\t\t\t\t\t\tamount: 0,\r\n\t\t\t\t\t\tmin: 0,\r\n\t\t\t\t\t\tmax: Infinity,\r\n\t\t\t\t\t\tdate: new Date()\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\telse\r\n\t\t\tthis.setState({\r\n\t\t\t\tloading: false\r\n\t\t\t});\r\n\t};\r\n\r\n\thandleChangeType = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n\t\tlet amount = this.state.amount;\r\n\t\tif (e.target.value === \"expense\") {\r\n\t\t\tamount *= -1;\r\n\t\t\tthis.setState({ max: 0, min: -Infinity, amount });\r\n\t\t} else if (e.target.value === \"income\") {\r\n\t\t\tamount *= -1;\r\n\t\t\tthis.setState({ max: Infinity, min: 0, amount });\r\n\t\t}\r\n\t};\r\n\r\n\thandleBudgetChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n\t\tconst budgetIndex = parseInt(e.target.value, 10);\r\n\t\tthis.setState({\r\n\t\t\tbudgetIndex,\r\n\t\t\tcategoryIndex: 0\r\n\t\t});\r\n\t};\r\n\r\n\thandleDateChange = (date: Date | null) => {\r\n\t\tif (date) {\r\n\t\t\tthis.setState({ date });\r\n\t\t}\r\n\t};\r\n\r\n\thandleAmount = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n\t\tthis.setState({ init: false });\r\n\t\tlet amount = parseFloat(e.target.value);\r\n\t\tif (amount > 0 && this.state.min < 0) amount *= -1;\r\n\t\tthis.setState({ amount });\r\n\r\n\t\t// Check if initial value is negative or positive  value\r\n\t\tif (this.state.amount < 0) this.setState({ min: -Infinity, max: 0 });\r\n\t\telse this.setState({ min: 0, max: Infinity });\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className={classes.container}>\r\n\t\t\t\t<h1 className={classes.title}>Add new transaction</h1>\r\n\t\t\t\t<form className={classes.form} onSubmit={this.handleSubmit}>\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\t<span>Select Budget: </span>\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\tname=\"Budgets\"\r\n\t\t\t\t\t\t\tvalue={this.state.budgetIndex}\r\n\t\t\t\t\t\t\tonChange={this.handleBudgetChange}>\r\n\t\t\t\t\t\t\t{this.props.budgets.map((b, i) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<option key={i} value={i}>\r\n\t\t\t\t\t\t\t\t\t\t{b.name}\r\n\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<label className={classes.desc}>\r\n\t\t\t\t\t\t<span>Description:</span>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tmaxLength={50}\r\n\t\t\t\t\t\t\tonChange={e => this.setState({ desc: e.target.value })}\r\n\t\t\t\t\t\t\tvalue={this.state.desc}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<label className={classes.categoryIndex}>\r\n\t\t\t\t\t\t<span>Category:</span>\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\tname=\"categoryIndex\"\r\n\t\t\t\t\t\t\t// Add value here later\r\n\t\t\t\t\t\t\tonChange={e =>\r\n\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\tcategoryIndex: parseInt(e.target.value, 10)\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvalue={this.state.categoryIndex}>\r\n\t\t\t\t\t\t\t{this.props.budgets[this.state.budgetIndex].categories.map(\r\n\t\t\t\t\t\t\t\t(c, i) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<option key={i} value={i}>\r\n\t\t\t\t\t\t\t\t\t\t\t{c}\r\n\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<label onClick={e => e.preventDefault()} className={classes.date}>\r\n\t\t\t\t\t\t<span className={classes.dateLabel}>Date: </span>\r\n\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\tonChange={this.handleDateChange}\r\n\t\t\t\t\t\t\tselected={this.state.date}\r\n\t\t\t\t\t\t\tdateFormat=\"dd/MM/yyyy\"\r\n\t\t\t\t\t\t\tpeekNextMonth\r\n\t\t\t\t\t\t\tshowMonthDropdown\r\n\t\t\t\t\t\t\tshowYearDropdown\r\n\t\t\t\t\t\t\tdropdownMode=\"select\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<label className={classes.amount}>\r\n\t\t\t\t\t\t<span>Amount $:</span>\r\n\t\t\t\t\t\t{/**Need to include a select for expense or income */}\r\n\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\t\tthis.state.amount < 0\r\n\t\t\t\t\t\t\t\t\t? classes.inputNumberExp\r\n\t\t\t\t\t\t\t\t\t: classes.inputNumberInc\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\tmaxLength={20}\r\n\t\t\t\t\t\t\tonChange={this.handleAmount}\r\n\t\t\t\t\t\t\tvalue={this.state.init ? \"\" : this.state.amount}\r\n\t\t\t\t\t\t\tmin={this.state.min}\r\n\t\t\t\t\t\t\tmax={this.state.max}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t// pattern=\"^\\d+(?:\\.\\d{1,2})?$\"\r\n\t\t\t\t\t\t\t// step=\".01\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<div className={classes.type}>\r\n\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\t\t\tname=\"amountType\"\r\n\t\t\t\t\t\t\t\tvalue=\"income\"\r\n\t\t\t\t\t\t\t\tchecked={\r\n\t\t\t\t\t\t\t\t\tthis.state.min >= 0 && this.state.amount > 0 ? true : false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tonChange={e => this.handleChangeType(e)}\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<span>Income +</span>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\t\t\tname=\"amountType\"\r\n\t\t\t\t\t\t\t\tvalue=\"expense\"\r\n\t\t\t\t\t\t\t\tonChange={e => this.handleChangeType(e)}\r\n\t\t\t\t\t\t\t\tchecked={\r\n\t\t\t\t\t\t\t\t\tthis.state.min < 0 && this.state.amount < 0 ? true : false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<span>Expense - </span>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{this.state.loading ? (\r\n\t\t\t\t\t\t<div className={classes.spinner}>\r\n\t\t\t\t\t\t\t<Spinner />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<input type=\"submit\" value=\"Submit\" />\r\n\t\t\t\t\t)}\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state: StoreState) => ({\r\n\tbudgets: state.budgets,\r\n\tcurrentBudget: state.currentBudget\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\t{ addTransaction }\r\n)(AddTransaction);\r\n","import React, { Component } from \"react\";\r\nimport { RouteComponentProps } from \"react-router\";\r\nimport { FaTrashAlt, FaPlusSquare, FaMinusSquare } from \"react-icons/fa\";\r\nimport { connect } from \"react-redux\";\r\nimport classes from \"./EditBudget.module.scss\";\r\nimport { StoreState } from \"../../../reducers\";\r\nimport {\r\n\teditBudget,\r\n\tdeleteBudget,\r\n\tsetAlert,\r\n\tAlertType,\r\n\tIBudget\r\n} from \"../../../actions\";\r\nimport Spinner from \"../../utils/Spinner/Spinner\";\r\n\r\ninterface Props extends RouteComponentProps, StoreState {\r\n\teditBudget: (budgetId: string, form: EditBudgetForm) => Promise<void>;\r\n\tdeleteBudget: (budget: IBudget) => Promise<void>;\r\n\tsetAlert: (msg: string, alertType: AlertType) => void;\r\n\tselectBudget: (budgetIndex: number) => void;\r\n}\r\n\r\nexport interface EditBudgetForm {\r\n\tname: string;\r\n\tcategories: string[];\r\n\tstartingBalance: number;\r\n}\r\ninterface State extends EditBudgetForm {\r\n\tloading: boolean;\r\n\tbudgetIndex: number;\r\n\tnCategories: number;\r\n}\r\n\r\nclass EditBudget extends Component<Props, State> {\r\n\tstate = {\r\n\t\tbudgetIndex: 0,\r\n\t\tname: this.props.budgets[0].name,\r\n\t\tcategories: [...this.props.budgets[0].categories],\r\n\t\tnCategories: this.props.budgets[0].categories.length,\r\n\t\tstartingBalance: this.props.budgets[0].startingBalance,\r\n\t\tloading: false\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (this.props.currentBudget._id) {\r\n\t\t\tconst budgetIndex = this.props.budgets.findIndex(\r\n\t\t\t\tb => b._id === this.props.currentBudget._id\r\n\t\t\t);\r\n\t\t\tconst { name, categories, startingBalance } = this.props.currentBudget;\r\n\t\t\tthis.setState({\r\n\t\t\t\tbudgetIndex,\r\n\t\t\t\tname,\r\n\t\t\t\tcategories,\r\n\t\t\t\tstartingBalance,\r\n\t\t\t\tnCategories: categories.length\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\thandleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n\t\tthis.setState({ loading: true });\r\n\t\tconst { budgetIndex, name, categories, startingBalance } = this.state;\r\n\t\tconst budgetId = this.props.budgets[budgetIndex]._id;\r\n\t\te.preventDefault();\r\n\t\tif (budgetId) {\r\n\t\t\tthis.props\r\n\t\t\t\t.editBudget(budgetId, {\r\n\t\t\t\t\tname,\r\n\t\t\t\t\tcategories,\r\n\t\t\t\t\tstartingBalance\r\n\t\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tloading: false\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.props.setAlert(\"Invalid budget selected!\", AlertType.warning);\r\n\t\t}\r\n\t};\r\n\r\n\taddCategories = (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\r\n\t\te.preventDefault();\r\n\t\t// Max categories is 8 due to the colour scheme of the pieGraph\r\n\t\tif (this.state.nCategories < 8) {\r\n\t\t\tconst categories = this.state.categories;\r\n\t\t\tconst nCategories = this.state.nCategories + 1;\r\n\t\t\tcategories.push(\"\");\r\n\r\n\t\t\tthis.setState({ nCategories, categories });\r\n\t\t\tthis.props.setAlert(\r\n\t\t\t\t\"Be careful when adding categories as these cannot be deleted after updating the budget.\",\r\n\t\t\t\tAlertType.info\r\n\t\t\t);\r\n\t\t} else\r\n\t\t\tthis.props.setAlert(\r\n\t\t\t\t\"Maximum number of categories reached!!\",\r\n\t\t\t\tAlertType.warning\r\n\t\t\t);\r\n\t};\r\n\r\n\tdelCategories = (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\r\n\t\te.preventDefault();\r\n\t\tconst i = this.state.budgetIndex;\r\n\t\tconst nCategories = this.state.nCategories - 1;\r\n\t\tconst categories = this.state.categories;\r\n\t\t// Delete the last element of array and make it empty\r\n\t\tif (this.state.nCategories > this.props.budgets[i].categories.length) {\r\n\t\t\tcategories.pop();\r\n\t\t\tthis.setState({ nCategories, categories });\r\n\t\t} else\r\n\t\t\tthis.props.setAlert(\r\n\t\t\t\t\"Cannot reduce number of categories that was previously set! This could affect any previous transactions made.\",\r\n\t\t\t\tAlertType.warning\r\n\t\t\t);\r\n\t};\r\n\r\n\tonChangeCategory = (\r\n\t\te: React.ChangeEvent<HTMLInputElement>,\r\n\t\tindex: number\r\n\t) => {\r\n\t\tconst categories = this.state.categories;\r\n\t\tcategories[index] = e.target.value;\r\n\t\tthis.setState({ categories });\r\n\t};\r\n\r\n\tonChangeSelect = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n\t\tconst i = parseInt(e.target.value, 10);\r\n\t\tthis.setState({\r\n\t\t\tbudgetIndex: i,\r\n\t\t\tname: this.props.budgets[i].name,\r\n\t\t\tcategories: [...this.props.budgets[i].categories],\r\n\t\t\tnCategories: this.props.budgets[i].categories.length,\r\n\t\t\tstartingBalance: this.props.budgets[i].startingBalance\r\n\t\t});\r\n\t};\r\n\r\n\thandleDelete = () => {\r\n\t\tif (\r\n\t\t\twindow.confirm(\r\n\t\t\t\t`Are you sure you want to delete budget ${this.state.name}?`\r\n\t\t\t)\r\n\t\t) {\r\n\t\t\t// Set loading to true\r\n\t\t\tthis.setState({ loading: true });\r\n\t\t\tconst previousBudget = this.state.budgetIndex - 1;\r\n\r\n\t\t\tconst budget = this.props.budgets[this.state.budgetIndex];\r\n\t\t\tthis.props.deleteBudget(budget).then(() => {\r\n\t\t\t\tif (this.props.budgets.length > 1) {\r\n\t\t\t\t\t// Select new budget from Container component\r\n\t\t\t\t\tconst i = this.props.budgets.length - 1;\r\n\t\t\t\t\tthis.props.selectBudget(i);\r\n\t\t\t\t\t//Reset form after deleting budget\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tbudgetIndex: previousBudget,\r\n\t\t\t\t\t\tname: this.props.budgets[previousBudget].name,\r\n\t\t\t\t\t\tcategories: [...this.props.budgets[previousBudget].categories],\r\n\t\t\t\t\t\tnCategories: this.props.budgets[previousBudget].categories.length,\r\n\t\t\t\t\t\tstartingBalance: this.props.budgets[previousBudget].startingBalance,\r\n\t\t\t\t\t\tloading: false\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.props.history.push(this.props.match.path + \"/budget/new\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\thandleCancel = (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\r\n\t\te.preventDefault();\r\n\t\tthis.props.history.goBack();\r\n\t};\r\n\r\n\trender() {\r\n\t\t// Add spinner while data is being retreived from database\r\n\t\treturn (\r\n\t\t\t<div className={classes.container}>\r\n\t\t\t\t<h1 className={classes.title}>Edit budget</h1>\r\n\t\t\t\t<form className={classes.form} onSubmit={this.handleSubmit}>\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\t<span>Select Budget: </span>\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\tvalue={this.state.budgetIndex}\r\n\t\t\t\t\t\t\tonChange={this.onChangeSelect}\r\n\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\tname=\"Budgets\"\r\n\t\t\t\t\t\t\trequired>\r\n\t\t\t\t\t\t\t{this.props.budgets.map((b, i) => (\r\n\t\t\t\t\t\t\t\t<option key={b._id} value={i}>\r\n\t\t\t\t\t\t\t\t\t{b.name}\r\n\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<label className={classes.name}>\r\n\t\t\t\t\t\t<span>Budget name:</span>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tmaxLength={20}\r\n\t\t\t\t\t\t\tonChange={e => this.setState({ name: e.target.value })}\r\n\t\t\t\t\t\t\tvalue={this.state.name}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\t<span>Starting balance $:</span>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\tonChange={e =>\r\n\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\tstartingBalance: parseFloat(e.target.value)\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvalue={\r\n\t\t\t\t\t\t\t\tthis.state.startingBalance === 0\r\n\t\t\t\t\t\t\t\t\t? undefined\r\n\t\t\t\t\t\t\t\t\t: this.state.startingBalance\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<label className={classes.categories}>\r\n\t\t\t\t\t\t{this.state.categories.map((c, i) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tmaxLength={20}\r\n\t\t\t\t\t\t\t\t\tonChange={e => this.onChangeCategory(e, i)}\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.categories[i]}\r\n\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t<div className={classes.btnCategories}>\r\n\t\t\t\t\t\t\t<span>Categories:</span>\r\n\r\n\t\t\t\t\t\t\t<button className={classes.btnGreen} onClick={this.addCategories}>\r\n\t\t\t\t\t\t\t\t<FaPlusSquare />\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button className={classes.btnDel} onClick={this.delCategories}>\r\n\t\t\t\t\t\t\t\t<FaMinusSquare />\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t{/** Bottom buttons */}\r\n\t\t\t\t\t{this.state.loading ? (\r\n\t\t\t\t\t\t<div className={classes.spinner}>\r\n\t\t\t\t\t\t\t<Spinner />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<button className={classes.btnCancel} onClick={this.handleCancel}>\r\n\t\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<input type=\"submit\" value=\"Submit\" />\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName={classes.deleteBudget}\r\n\t\t\t\t\t\t\t\tonClick={this.handleDelete}>\r\n\t\t\t\t\t\t\t\t<FaTrashAlt /> Delete Budget\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state: StoreState) => ({\r\n\tauth: state.auth,\r\n\talerts: state.alerts,\r\n\tbudgets: state.budgets,\r\n\tcurrentBudget: state.currentBudget,\r\n\ttransactions: state.transactions,\r\n\tcharts: state.charts\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\t{ editBudget, setAlert, deleteBudget }\r\n)(EditBudget);\r\n","import React, { Component } from \"react\";\r\nimport DatePicker from \"react-datepicker\";\r\nimport Axios from \"axios\";\r\nimport { withRouter, RouteComponentProps } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport classes from \"./EditTransaction.module.scss\";\r\nimport { ITransaction, setAlert, AlertType } from \"../../../actions\";\r\nimport Spinner from \"../../utils/Spinner/Spinner\";\r\nimport { StoreState } from \"../../../reducers\";\r\nimport { FaTrashAlt } from \"react-icons/fa\";\r\ninterface Params {\r\n\tbudgetId: string;\r\n\ttransactionId: string;\r\n}\r\nexport interface EditTransactionForm {\r\n\tdesc?: string;\r\n\tcategoryIndex?: number;\r\n\tamount?: number;\r\n\tdate?: Date | string;\r\n}\r\ninterface Props extends RouteComponentProps<Params>, StoreState {\r\n\tsetAlert: (message: string, alertType: AlertType) => void;\r\n}\r\ninterface State extends EditTransactionForm {\r\n\tmin: number;\r\n\tmax: number;\r\n\tloading: boolean;\r\n}\r\n\r\nclass EditTransaction extends Component<Props, State> {\r\n\tstate = {\r\n\t\tdesc: \"\",\r\n\t\tcategoryIndex: 0,\r\n\t\tamount: 0,\r\n\t\tmin: 0,\r\n\t\tmax: Infinity,\r\n\t\tdate: new Date(),\r\n\t\tloading: true\r\n\t};\r\n\r\n\tasync componentDidMount() {\r\n\t\tconst { budgetId, transactionId } = this.props.match.params;\r\n\r\n\t\t// Get Transaction by Id using axios\r\n\t\tconst res = await Axios.get<ITransaction>(\r\n\t\t\t`/api/transactions/${budgetId}/${transactionId}`\r\n\t\t);\r\n\t\tconst { desc, amount, categoryIndex, date } = res.data;\r\n\t\tconst dateFixed = new Date(date);\r\n\t\tthis.setState({\r\n\t\t\tdesc,\r\n\t\t\tamount,\r\n\t\t\tcategoryIndex,\r\n\t\t\tdate: dateFixed,\r\n\t\t\tloading: false\r\n\t\t});\r\n\t\t// Set min and max\r\n\t\tif (amount < 0)\r\n\t\t\tthis.setState({\r\n\t\t\t\tmax: 0,\r\n\t\t\t\tmin: -Infinity,\r\n\t\t\t\tamount\r\n\t\t\t});\r\n\t\telse this.setState({ max: Infinity, min: 0 });\r\n\t}\r\n\r\n\thandleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\r\n\t\te.preventDefault();\r\n\t\tthis.setState({\r\n\t\t\tloading: true\r\n\t\t});\r\n\t\tconst { desc, categoryIndex, amount, date } = this.state;\r\n\t\t// Need to convert date to ISO format before sending to server otherwise, it will send incorrect date\r\n\t\tconst isoDate = date.toISOString();\r\n\t\tconst { budgetId, transactionId } = this.props.match.params;\r\n\t\tawait Axios.patch(`/api/transactions/update/${budgetId}/${transactionId}`, {\r\n\t\t\tdesc,\r\n\t\t\tcategoryIndex,\r\n\t\t\tdate: isoDate,\r\n\t\t\tamount\r\n\t\t});\r\n\r\n\t\tthis.props.history.push(`/user/budget/${budgetId}`);\r\n\r\n\t\tthis.props.setAlert(\"Transaction updated!\", AlertType.success);\r\n\t};\r\n\r\n\thandleChangeType = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n\t\tlet amount = this.state.amount;\r\n\t\tif (e.target.value === \"expense\" && amount > 0) {\r\n\t\t\tamount *= -1;\r\n\t\t\tthis.setState({ max: 0, min: -Infinity, amount });\r\n\t\t} else if (amount < 0 && e.target.value === \"income\") {\r\n\t\t\tamount *= -1;\r\n\t\t\tthis.setState({ max: Infinity, min: 0, amount });\r\n\t\t}\r\n\t};\r\n\r\n\thandleDateChange = (date: Date | null) => {\r\n\t\tif (date) this.setState({ date });\r\n\t};\r\n\r\n\thandleAmount = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n\t\tlet amount = parseFloat(e.target.value);\r\n\t\tif (amount > 0 && this.state.min < 0) amount *= -1;\r\n\t\tthis.setState({ amount });\r\n\r\n\t\t// Check if initial value is negative or positive  value\r\n\t\tif (this.state.amount < 0) this.setState({ min: -Infinity, max: 0 });\r\n\t\telse this.setState({ min: 0, max: Infinity });\r\n\t};\r\n\r\n\thandleDelete = async () => {\r\n\t\tthis.setState({ loading: true });\r\n\t\tconst { budgetId, transactionId } = this.props.match.params;\r\n\t\tawait Axios.patch(\r\n\t\t\t`/api/transactions/delete/${budgetId}/${transactionId}`\r\n\t\t).then(() => {\r\n\t\t\tthis.setState({ loading: false });\r\n\t\t\tthis.props.history.push(`/user/budget/${budgetId}`);\r\n\t\t\tthis.props.setAlert(\"Transaction deleted!\", AlertType.success);\r\n\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { budgetId } = this.props.match.params;\r\n\t\tconst budget = this.props.budgets.find(b => b._id === budgetId);\r\n\t\treturn (\r\n\t\t\t<div className={classes.container}>\r\n\t\t\t\t<h1 className={classes.title}>Edit transaction</h1>\r\n\t\t\t\t<form className={classes.form} onSubmit={this.handleSubmit}>\r\n\t\t\t\t\t<label className={classes.desc}>\r\n\t\t\t\t\t\t<span>Description:</span>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tmaxLength={50}\r\n\t\t\t\t\t\t\tonChange={e => this.setState({ desc: e.target.value })}\r\n\t\t\t\t\t\t\tvalue={this.state.desc}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<label className={classes.categoryIndex}>\r\n\t\t\t\t\t\t<span>Category:</span>\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\tname=\"categoryIndex\"\r\n\t\t\t\t\t\t\t// Add value here later\r\n\t\t\t\t\t\t\tonChange={e =>\r\n\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\tcategoryIndex: parseInt(e.target.value, 10)\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvalue={this.state.categoryIndex}>\r\n\t\t\t\t\t\t\t{budget &&\r\n\t\t\t\t\t\t\t\tbudget.categories.map((c, i) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<option key={i} value={i}>\r\n\t\t\t\t\t\t\t\t\t\t\t{c}\r\n\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<label onClick={e => e.preventDefault()} className={classes.date}>\r\n\t\t\t\t\t\t<span className={classes.dateLabel}>Date: </span>\r\n\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\tonChange={this.handleDateChange}\r\n\t\t\t\t\t\t\tselected={this.state.date}\r\n\t\t\t\t\t\t\tdateFormat=\"dd/MM/yyyy\"\r\n\t\t\t\t\t\t\tpeekNextMonth\r\n\t\t\t\t\t\t\tshowMonthDropdown\r\n\t\t\t\t\t\t\tshowYearDropdown\r\n\t\t\t\t\t\t\tdropdownMode=\"select\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<label className={classes.amount}>\r\n\t\t\t\t\t\t<span>Amount $:</span>\r\n\t\t\t\t\t\t{/**Need to include a select for expense or income */}\r\n\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\t\tthis.state.amount < 0\r\n\t\t\t\t\t\t\t\t\t? classes.inputNumberExp\r\n\t\t\t\t\t\t\t\t\t: classes.inputNumberInc\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\tmaxLength={20}\r\n\t\t\t\t\t\t\tonChange={this.handleAmount}\r\n\t\t\t\t\t\t\tvalue={this.state.amount}\r\n\t\t\t\t\t\t\tmin={this.state.min}\r\n\t\t\t\t\t\t\tmax={this.state.max}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t// pattern=\"^\\d+(?:\\.\\d{1,2})?$\"\r\n\t\t\t\t\t\t\t// step=\".01\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<div className={classes.type}>\r\n\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\t\t\tname=\"amountType\"\r\n\t\t\t\t\t\t\t\tvalue=\"income\"\r\n\t\t\t\t\t\t\t\tchecked={\r\n\t\t\t\t\t\t\t\t\tthis.state.min >= 0 && this.state.amount > 0 ? true : false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tonChange={e => this.handleChangeType(e)}\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<span>Income +</span>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\t\t\tname=\"amountType\"\r\n\t\t\t\t\t\t\t\tvalue=\"expense\"\r\n\t\t\t\t\t\t\t\tonChange={e => this.handleChangeType(e)}\r\n\t\t\t\t\t\t\t\tchecked={\r\n\t\t\t\t\t\t\t\t\tthis.state.min < 0 && this.state.amount < 0 ? true : false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<span>Expense - </span>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{this.state.loading ? (\r\n\t\t\t\t\t\t<div className={classes.spinner}>\r\n\t\t\t\t\t\t\t<Spinner />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName={classes.btnCancel}\r\n\t\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\tthis.props.history.goBack();\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\tGo back\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<input type=\"submit\" value=\"Submit\" />\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName={classes.deleteTransaction}\r\n\t\t\t\t\t\t\t\tonClick={this.handleDelete}>\r\n\t\t\t\t\t\t\t\t<FaTrashAlt /> Delete Transaction\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state: StoreState) => ({\r\n\tbudgets: state.budgets\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\t{ setAlert }\r\n)(withRouter(EditTransaction));\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\"\r\nimport { StoreState } from \"../../../reducers\";\r\nimport { updateUser } from \"../../../actions\";\r\nimport classes from \"./UpdateMe.module.scss\";\r\nimport Spinner from \"../../utils/Spinner/Spinner\";\r\n\r\ninterface Props extends StoreState {\r\n\tupdateUser: (form: UpdateMeForm) => Promise<void>;\r\n}\r\nexport interface UpdateMeForm {\r\n\tfirstName?: string;\r\n\tlastName?: string;\r\n\temail?: string;\r\n}\r\n\r\ninterface State extends UpdateMeForm {\r\n\tloading: boolean;\r\n}\r\n\r\nclass UpdateMe extends Component<Props, State> {\r\n\tstate = {\r\n\t\tfirstName: this.props.auth.currentUser\r\n\t\t\t? this.props.auth.currentUser.firstName\r\n\t\t\t: \"\",\r\n\t\tlastName: this.props.auth.currentUser\r\n\t\t\t? this.props.auth.currentUser.lastName\r\n\t\t\t: \"\",\r\n\t\temail: this.props.auth.currentUser ? this.props.auth.currentUser.email : \"\",\r\n\t\tloading: false\r\n\t};\r\n\r\n\thandleCancel = () => {\r\n\t\tthis.setState({ firstName: \"\", lastName: \"\", email: \"\" });\r\n\t};\r\n\r\n\thandleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n\t\te.preventDefault();\r\n\t\tconst { firstName, lastName, email } = this.state;\r\n\t\tthis.setState({ loading: true });\r\n\t\tthis.props.updateUser({ firstName, lastName, email }).then(() => {\r\n\t\t\tthis.setState({ loading: false });\r\n\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { firstName, lastName, email } = this.state;\r\n\t\treturn (\r\n\t\t\t<div className={classes.container}>\r\n\t\t\t\t<h1 className={classes.title}>Update your details</h1>\r\n\t\t\t\t<form className={classes.form} onSubmit={this.handleSubmit}>\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\t<span>First Name:</span>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tplaceholder=\"Enter first name\"\r\n\t\t\t\t\t\t\tname=\"firstName\"\r\n\t\t\t\t\t\t\tvalue={firstName}\r\n\t\t\t\t\t\t\tonChange={e => this.setState({ firstName: e.target.value })}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\t<span>Last Name:</span>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tplaceholder=\"Enter last name\"\r\n\t\t\t\t\t\t\tname=\"lastName\"\r\n\t\t\t\t\t\t\tvalue={lastName}\r\n\t\t\t\t\t\t\tonChange={e => this.setState({ lastName: e.target.value })}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\t<span>Email:</span>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\tplaceholder=\"Enter Email\"\r\n\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\t\tonChange={e => this.setState({ email: e.target.value })}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<Link className={classes.changePassword} to=\"/user/changepassword\">\r\n\t\t\t\t\t\tChange Password\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t{this.state.loading ? (\r\n\t\t\t\t\t\t<div className={classes.spinner}>\r\n\t\t\t\t\t\t\t<Spinner />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<button className={classes.btnCancel} onClick={this.handleCancel}>\r\n\t\t\t\t\t\t\t\tClear\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<input type=\"submit\" className=\"btn btn__submit\" value=\"Update\" />\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state: StoreState) => ({\r\n\tauth: state.auth\r\n});\r\n\r\nexport default connect(mapStateToProps, { updateUser })(UpdateMe);\r\n","import { UpdateMeForm } from \"./../components/pages/UpdateMe/UpdateMe\";\r\nimport { AlertType, setAlert } from \"./alerts\";\r\nimport { ActionTypes } from \"./types\";\r\nimport axios from \"axios\";\r\nimport catchAsync from \"../utils/catchAsync\";\r\n\r\n// Compatible with updateMe state also\r\nexport interface IUser {\r\n\tactive?: boolean;\r\n\t_id?: string;\r\n\trole?: string;\r\n\tfirstName: string;\r\n\tlastName: string;\r\n\temail: string;\r\n\tpassword?: string;\r\n\tpasswordChangedAt?: Date;\r\n}\r\n\r\nexport interface UpdateUserAction {\r\n\ttype: ActionTypes.updateUser;\r\n\tpayload: IUser;\r\n}\r\n\r\nexport const updateUser = (form: UpdateMeForm) =>\r\n\tcatchAsync(async dispatch => {\r\n\t\tconst res = await axios.patch<IUser>(\"/api/users/updateMe\", form);\r\n\r\n\t\tdispatch<UpdateUserAction>({\r\n\t\t\ttype: ActionTypes.updateUser,\r\n\t\t\tpayload: res.data\r\n\t\t});\r\n\r\n\t\tdispatch(setAlert(\"User successfully updated!\", AlertType.success));\r\n\t});\r\n","/* \r\nThis component is used to extend path name instead of creating an entirely new one\r\nIt is required to be nested under an existend component under the main Switch Router.\r\n*/\r\n\r\nimport React, { Component } from \"react\";\r\nimport { match, Redirect, Route, Switch } from \"react-router-dom\";\r\nimport classes from \"../layout/Container/Container.module.scss\";\r\n\r\n// Routes\r\nimport ChangePassword from \"../auth/ChangePassword/ChangePassword\";\r\nimport Budget from \"../layout/Budget/Budget\";\r\nimport AddBudget from \"../pages/AddBudget/AddBudget\";\r\nimport AddTransaction from \"../pages/AddTransaction/AddTransaction\";\r\nimport EditBudget from \"../pages/EditBudget/EditBudget\";\r\nimport EditTransaction from \"../pages/EditTransaction/EditTransaction\";\r\nimport UpdateMe from \"../pages/UpdateMe/UpdateMe\";\r\n\r\ninterface Props {\r\n\tselectBudget: (budgetIndex: number) => void;\r\n\tstopLoading: () => void;\r\n\tmatch: match;\r\n}\r\n\r\nclass ContainerRoutes extends Component<Props> {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className={classes.routes}>\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\texact\r\n\t\t\t\t\t\tpath={this.props.match.path + \"/update\"}\r\n\t\t\t\t\t\tcomponent={UpdateMe}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\texact\r\n\t\t\t\t\t\tpath={this.props.match.path + \"/changepassword\"}\r\n\t\t\t\t\t\tcomponent={ChangePassword}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\texact\r\n\t\t\t\t\t\tpath={this.props.match.path + \"/budget/new\"}\r\n\t\t\t\t\t\trender={(props) => (\r\n\t\t\t\t\t\t\t<AddBudget selectBudget={this.props.selectBudget} {...props} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\texact\r\n\t\t\t\t\t\tpath={this.props.match.path + \"/budget/edit\"}\r\n\t\t\t\t\t\trender={(props) => (\r\n\t\t\t\t\t\t\t<EditBudget selectBudget={this.props.selectBudget} {...props} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\texact\r\n\t\t\t\t\t\tpath={this.props.match.path + \"/transactions/new\"}\r\n\t\t\t\t\t\tcomponent={AddTransaction}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\texact\r\n\t\t\t\t\t\tpath={this.props.match.path + \"/transactions/new/:budgetId\"}\r\n\t\t\t\t\t\tcomponent={AddTransaction}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\texact\r\n\t\t\t\t\t\tpath={\r\n\t\t\t\t\t\t\tthis.props.match.path +\r\n\t\t\t\t\t\t\t\"/transactions/:budgetId/edit/:transactionId\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcomponent={EditTransaction}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\texact\r\n\t\t\t\t\t\tpath={this.props.match.path + \"/budget/:budgetId\"}\r\n\t\t\t\t\t\trender={(props) => (\r\n\t\t\t\t\t\t\t<Budget stopLoading={this.props.stopLoading} {...props} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\texact\r\n\t\t\t\t\t\tpath={this.props.match.path}\r\n\t\t\t\t\t\trender={(props) => (\r\n\t\t\t\t\t\t\t<Budget stopLoading={this.props.stopLoading} {...props} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Redirect to=\"/user\" />\r\n\t\t\t\t</Switch>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default ContainerRoutes;\r\n","import React, { Component } from 'react'\r\nimport { IBudget } from '../../../actions'\r\nimport classes from \"./BudgetSelector.module.scss\"\r\n\r\nimport { FaHome } from \"react-icons/fa\";\r\n\r\ninterface Props {\r\n    loading: boolean;\r\n    selected: number;\r\n    budgets: IBudget[];\r\n    handleSelect: (e: React.ChangeEvent<HTMLSelectElement>) => void\r\n    mobileSelectBudget: () => void;\r\n}\r\n\r\nclass BudgetSelector extends Component<Props> {\r\n    state = {}\r\n\r\n    render() {\r\n        return (\r\n            <div className={classes.mobileSelect}>\r\n                <button onClick={this.props.mobileSelectBudget}>\r\n                    <FaHome />\r\n                    <span>Budgety</span>\r\n                </button>{\" \"}\r\n                <span>:</span>\r\n                <select onChange={this.props.handleSelect} value={this.props.selected}>\r\n                    {!this.props.loading &&\r\n                        this.props.budgets.map((b, i) => {\r\n                            return (\r\n                                <option key={b._id} value={i}>\r\n                                    {b.name}\r\n                                </option>\r\n                            );\r\n                        })}\r\n                </select>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default BudgetSelector\r\n","import React, { Component } from \"react\";\r\nimport { withRouter, RouteComponentProps } from \"react-router-dom\";\r\nimport { GoDiffAdded, GoPerson } from \"react-icons/go\";\r\nimport { BsTable } from \"react-icons/bs\";\r\nimport { IoIosLogOut } from \"react-icons/io\";\r\nimport { RiMoneyDollarBoxLine } from \"react-icons/ri\"\r\nimport classes from \"./MobileNav.module.scss\";\r\nimport { IBudget } from \"../../../actions\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n\tcurrentBudget: IBudget;\r\n\tbudgets: IBudget[];\r\n\tgetLogout: () => void;\r\n}\r\ninterface State { }\r\n\r\nclass MobileNav extends Component<Props, State> {\r\n\tstate = {};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className={classes.nav}>\r\n\t\t\t\t{this.props.budgets.length > 0 && (\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\tthis.props.currentBudget._id &&\r\n\t\t\t\t\t\t\tthis.props.history.push(\r\n\t\t\t\t\t\t\t\tthis.props.match.url + \"/budget/\" + this.props.currentBudget._id\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t<BsTable />\r\n\t\t\t\t\t\t<span>My Budget</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)}\r\n\t\t\t\t<button\r\n\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\tthis.props.history.push(this.props.match.url + \"/budget/new\")\r\n\t\t\t\t\t}\r\n\t\t\t\t\tclassName={classes.addBudget}>\r\n\t\t\t\t\t<GoDiffAdded />\r\n\t\t\t\t\t<span>Create Budget</span>\r\n\t\t\t\t</button>\r\n\t\t\t\t{this.props.budgets.length > 0 && (\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\tthis.props.currentBudget._id &&\r\n\t\t\t\t\t\t\tthis.props.history.push(\r\n\t\t\t\t\t\t\t\tthis.props.match.url + \"/transactions/new\"\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t<RiMoneyDollarBoxLine />\r\n\t\t\t\t\t\t<span>Add Transaction</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)}\r\n\t\t\t\t<button\r\n\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\tthis.props.history.push(this.props.match.url + \"/update\")\r\n\t\t\t\t\t}>\r\n\t\t\t\t\t<GoPerson />\r\n\t\t\t\t\t<span>Update Account</span>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button onClick={this.props.getLogout}>\r\n\t\t\t\t\t<IoIosLogOut />\r\n\t\t\t\t\t<span>Logout</span>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withRouter(MobileNav);\r\n","import { History } from \"history\";\r\nimport React, { Component } from \"react\";\r\nimport { Link, match } from \"react-router-dom\";\r\nimport { IBudget } from \"../../../actions\";\r\nimport transactionIcon from \"../../../images/transaction.png\";\r\nimport classes from \"./SideNav.module.scss\";\r\n\r\nimport { FaKey, FaRegEdit } from \"react-icons/fa\";\r\nimport { GoDiffAdded, GoPerson } from \"react-icons/go\";\r\n\r\ninterface Props {\r\n\tcurrentBudgetId: string | undefined;\r\n\tloading: boolean;\r\n\tselected: number;\r\n\tbudgets: IBudget[];\r\n\tselectBudget: (budgetIndex: number) => void;\r\n\thistory: History;\r\n\tmatch: match;\r\n}\r\n\r\nclass SideNav extends Component<Props> {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className={classes.container}>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName={classes.add}\r\n\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\tthis.props.currentBudgetId &&\r\n\t\t\t\t\t\tthis.props.history.push(this.props.match.path + \"/transactions/new\")\r\n\t\t\t\t\t}>\r\n\t\t\t\t\t<img src={transactionIcon} alt=\"Transaction icon\" />\r\n\t\t\t\t\t<span>Add Transaction</span>\r\n\t\t\t\t</button>\r\n\t\t\t\t<div className={classes.budgets}>\r\n\t\t\t\t\t<h3>Budgets</h3>\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t{!this.props.loading &&\r\n\t\t\t\t\t\t\t(this.props.budgets.length > 0 ? (\r\n\t\t\t\t\t\t\t\tthis.props.budgets.map((b, i) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\t\tkey={b._id}\r\n\t\t\t\t\t\t\t\t\t\t\tto={this.props.match.path + `/budget/${b._id}`}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.props.selectBudget(i)}>\r\n\t\t\t\t\t\t\t\t\t\t\t<li\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.props.selected === i &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.props.budgets.length > 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? classes.selected\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{b.name}\r\n\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\tkey={\"nobudget\"}\r\n\t\t\t\t\t\t\t\t\tto={this.props.match.path + `/budget/new`}>\r\n\t\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t\t<i>No budgets listed....</i>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t\t<div className={classes.budgetActions}>\r\n\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\tto={this.props.match.path + \"/budget/new\"}\r\n\t\t\t\t\t\t\tclassName={classes.budgetActionAdd}>\r\n\t\t\t\t\t\t\t<GoDiffAdded />\r\n\t\t\t\t\t\t\tAdd\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t{this.props.budgets.length > 0 && (\r\n\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\tto={this.props.match.path + \"/budget/edit\"}\r\n\t\t\t\t\t\t\t\tclassName={classes.budgetActionEdit}>\r\n\t\t\t\t\t\t\t\t<FaRegEdit />\r\n\t\t\t\t\t\t\t\tEdit\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className={classes.userActions}>\r\n\t\t\t\t\t<h3>User Actions</h3>\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t<Link to=\"/user/update\">\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<GoPerson />\r\n\t\t\t\t\t\t\t\tUpdate user details\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t<Link to=\"/user/changepassword\">\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<FaKey />\r\n\t\t\t\t\t\t\t\tChange password\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default SideNav;\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps } from \"react-router\";\r\nimport { getLogout } from \"../../../actions\";\r\nimport { StoreState } from \"../../../reducers\";\r\nimport ContainerRoutes from \"../../routing/ContainerRoutes\";\r\nimport BudgetSelector from \"../BudgetSelector/BudgetSelector\";\r\nimport MobileNav from \"../MobileNav/MobileNav\";\r\nimport SideNav from \"../SideNav/SideNav\";\r\nimport classes from \"./Container.module.scss\";\r\n\r\ninterface Props extends StoreState, RouteComponentProps {\r\n\tgetLogout: () => Promise<void>;\r\n}\r\ninterface State {\r\n\tloading: boolean;\r\n\tselected: number;\r\n}\r\n\r\nclass Container extends Component<Props, State> {\r\n\t// Add selected state so the selected budget becomes highlighted\r\n\t// Change budget id for edit based on selected budget\r\n\t// Maybe\r\n\r\n\tstate = {\r\n\t\tloading: true,\r\n\t\tselected: 0,\r\n\t};\r\n\r\n\tstopLoading = () => {\r\n\t\tthis.setState({ loading: false });\r\n\t};\r\n\r\n\tselectBudget = (budgetIndex: number) => {\r\n\t\tthis.setState({ selected: budgetIndex });\r\n\t};\r\n\r\n\thandleSelect = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n\t\tconst budgetIndex = parseInt(e.target.value, 10);\r\n\t\tthis.selectBudget(budgetIndex);\r\n\t\tconst budgetId = this.props.budgets[budgetIndex]._id;\r\n\t\tthis.props.history.push(this.props.match.path + `/budget/${budgetId}`);\r\n\t};\r\n\r\n\tmobileSelectBudget = () => {\r\n\t\tconst budgetId = this.props.budgets[this.state.selected]._id;\r\n\t\tthis.props.history.push(this.props.match.path + `/budget/${budgetId}`);\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className={classes.page}>\r\n\t\t\t\t{this.props.budgets.length > 0 && (\r\n\t\t\t\t\t<BudgetSelector\r\n\t\t\t\t\t\tloading={this.state.loading}\r\n\t\t\t\t\t\tselected={this.state.selected}\r\n\t\t\t\t\t\tbudgets={this.props.budgets}\r\n\t\t\t\t\t\thandleSelect={this.handleSelect}\r\n\t\t\t\t\t\tmobileSelectBudget={this.mobileSelectBudget}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t\t<MobileNav\r\n\t\t\t\t\tcurrentBudget={this.props.currentBudget}\r\n\t\t\t\t\tbudgets={this.props.budgets}\r\n\t\t\t\t\tgetLogout={this.props.getLogout}\r\n\t\t\t\t/>\r\n\t\t\t\t<button className={classes.logout} onClick={this.props.getLogout}>\r\n\t\t\t\t\tLogout\r\n\t\t\t\t</button>\r\n\t\t\t\t<div className={classes.container}>\r\n\t\t\t\t\t{/* Routes */}\r\n\t\t\t\t\t<ContainerRoutes\r\n\t\t\t\t\t\tselectBudget={this.selectBudget}\r\n\t\t\t\t\t\tstopLoading={this.stopLoading}\r\n\t\t\t\t\t\tmatch={this.props.match}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{/* NAVIGATION - cant be placed as of yet to its own component because of the styling */}\r\n\t\t\t\t\t<SideNav\r\n\t\t\t\t\t\tcurrentBudgetId={this.props.currentBudget._id}\r\n\t\t\t\t\t\tloading={this.state.loading}\r\n\t\t\t\t\t\tselected={this.state.selected}\r\n\t\t\t\t\t\tbudgets={this.props.budgets}\r\n\t\t\t\t\t\tselectBudget={this.selectBudget}\r\n\t\t\t\t\t\thistory={this.props.history}\r\n\t\t\t\t\t\tmatch={this.props.match}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state: StoreState) => ({\r\n\tauth: state.auth,\r\n\tbudgets: state.budgets,\r\n\tcurrentBudget: state.currentBudget,\r\n});\r\n\r\nexport default connect(mapStateToProps, { getLogout })(Container);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { registerUser, IUser } from \"../../../actions\";\r\nimport { StoreState } from \"../../../reducers\";\r\nimport classes from \"./Register.module.scss\";\r\nimport Spinner from \"../../utils/Spinner/Spinner\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { TiHomeOutline } from \"react-icons/ti\";\r\nimport { RouteComponentProps } from \"react-router\";\r\n\r\ninterface Props extends StoreState, RouteComponentProps {\r\n\tregisterUser: (\r\n\t\tform: IRegisterState,\r\n\t\tProps: RouteComponentProps\r\n\t) => Promise<void>;\r\n}\r\n\r\nexport interface IRegisterState extends IUser {\r\n\tloading?: boolean;\r\n\tpathname?: string;\r\n}\r\n\r\nclass Register extends Component<Props, IRegisterState> {\r\n\tstate = {\r\n\t\tfirstName: \"\",\r\n\t\tlastName: \"\",\r\n\t\temail: \"\",\r\n\t\tpassword: \"\",\r\n\t\tloading: false,\r\n\t\tpathname: this.props.history.location.pathname\r\n\t};\r\n\r\n\thandleChange = (e: { target: HTMLInputElement }) => {\r\n\t\tthis.setState({ ...this.state, [e.target.name]: e.target.value });\r\n\t};\r\n\r\n\thandleCancel = () => {\r\n\t\tthis.setState({ firstName: \"\", lastName: \"\", email: \"\", password: \"\" });\r\n\t};\r\n\r\n\thandleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n\t\te.preventDefault();\r\n\t\tthis.setState({ loading: true });\r\n\t\tconst { firstName, lastName, email, password } = this.state;\r\n\t\tthis.props\r\n\t\t\t.registerUser({ firstName, lastName, email, password }, { ...this.props })\r\n\t\t\t.then(() => {\r\n\t\t\t\tif (this.props.history.location.pathname === this.state.pathname) {\r\n\t\t\t\t\tthis.setState({ loading: false });\r\n\t\t\t\t\t// If register fails invalid\r\n\t\t\t\t\t// clear password\r\n\t\t\t\t\tthis.setState({ password: \"\" });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { firstName, lastName, email, password } = this.state;\r\n\t\treturn (\r\n\t\t\t<div className={classes.page}>\r\n\t\t\t\t<div className={classes.nav}>\r\n\t\t\t\t\t<Link to=\"/\">\r\n\t\t\t\t\t\t<button>\r\n\t\t\t\t\t\t\t<TiHomeOutline />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t<Link to=\"/login\">\r\n\t\t\t\t\t\t<button>Login</button>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={classes.container}>\r\n\t\t\t\t\t<h1>Sign Up</h1>\r\n\t\t\t\t\t<form className={classes.form} onSubmit={this.handleSubmit}>\r\n\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t<span>First Name:</span>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Enter first name\"\r\n\t\t\t\t\t\t\t\tname=\"firstName\"\r\n\t\t\t\t\t\t\t\tvalue={firstName}\r\n\t\t\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t<span>Last Name:</span>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Enter last name\"\r\n\t\t\t\t\t\t\t\tname=\"lastName\"\r\n\t\t\t\t\t\t\t\tvalue={lastName}\r\n\t\t\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t<span>Email:</span>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Enter Email\"\r\n\t\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t<span>Password:</span>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Enter Password\"\r\n\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t\t\t\tminLength={6}\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t{this.state.loading ? (\r\n\t\t\t\t\t\t\t<div className={classes.spinner}>\r\n\t\t\t\t\t\t\t\t<Spinner />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<input type=\"submit\" value=\"Register\" />\r\n\t\t\t\t\t\t\t\t<button onClick={this.handleCancel}>Clear</button>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state: StoreState) => ({\r\n\tauth: state.auth\r\n});\r\n\r\nexport default connect(mapStateToProps, { registerUser })(Register);\r\n","import React, { Component } from \"react\";\r\nimport { Route, RouteProps, Redirect } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { ActionTypes } from \"../../actions\";\r\nimport { Dispatch } from \"redux\";\r\n\r\ninterface Props extends RouteProps {\r\n\tsessionExpired: () => { type: ActionTypes };\r\n\tisAuthenticated: boolean;\r\n}\r\n\r\nclass PublicRoute extends Component<Props> {\r\n\trender() {\r\n\t\treturn this.props.isAuthenticated ? (\r\n\t\t\t<Redirect to=\"/user\" />\r\n\t\t) : (\r\n\t\t\t<Route {...this.props} />\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\r\n\tsessionExpired: () => dispatch({ type: ActionTypes.logoutUser })\r\n});\r\n\r\nexport default connect(\r\n\tnull,\r\n\tmapDispatchToProps\r\n)(PublicRoute);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { TiHomeOutline } from \"react-icons/ti\";\r\nimport { postForgotPassword } from \"../../../actions\";\r\nimport Spinner from \"../../utils/Spinner/Spinner\";\r\nimport classes from \"./ForgotPassword.module.scss\";\r\n\r\ninterface Props {\r\n\tpostForgotPassword: (email: IForgotPassState, url: string) => Promise<void>;\r\n}\r\nexport interface IForgotPassState {\r\n\tloading?: boolean;\r\n\temail: string;\r\n}\r\n\r\nclass ForgotPassword extends Component<Props, IForgotPassState> {\r\n\tstate = {\r\n\t\tloading: false,\r\n\t\temail: \"\"\r\n\t};\r\n\r\n\thandleChange = (e: { target: HTMLInputElement }) => {\r\n\t\tthis.setState({\r\n\t\t\t...this.state,\r\n\t\t\t[e.target.name]: e.target.value\r\n\t\t});\r\n\t};\r\n\r\n\thandleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n\t\te.preventDefault();\r\n\t\t// Set loading to true which adds spinner\r\n\t\tthis.setState({ loading: true });\r\n\t\t// Login user\r\n\t\tthis.props\r\n\t\t\t.postForgotPassword({ email: this.state.email }, document.location.href)\r\n\t\t\t.then(() => {\r\n\t\t\t\t// Refresh form\r\n\t\t\t\tthis.setState({ email: \"\", loading: false });\r\n\t\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className={classes.page}>\r\n\t\t\t\t<div className={classes.nav}>\r\n\t\t\t\t\t<Link to=\"/\">\r\n\t\t\t\t\t\t<button>\r\n\t\t\t\t\t\t\t<TiHomeOutline />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t<Link to=\"/login\">\r\n\t\t\t\t\t\t<button>Login</button>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className={classes.container}>\r\n\t\t\t\t\t<h1>Forgot password?</h1>\r\n\t\t\t\t\t<form className={classes.form} onSubmit={this.handleSubmit}>\r\n\t\t\t\t\t\t<p className={classes.desc}>\r\n\t\t\t\t\t\t\tPlease enter the email address registered to your account and we\r\n\t\t\t\t\t\t\twill send you the link to reset your password.\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\tplaceholder=\"Enter Email\"\r\n\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\tvalue={this.state.email}\r\n\t\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{this.state.loading ? (\r\n\t\t\t\t\t\t\t<div className={classes.spinner}>\r\n\t\t\t\t\t\t\t\t<Spinner />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<input type=\"submit\" value=\"Send to email\" />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default connect(null, { postForgotPassword })(ForgotPassword);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, Link } from \"react-router-dom\";\r\nimport { patchResetPassword } from \"../../../actions\";\r\nimport Spinner from \"../../utils/Spinner/Spinner\";\r\nimport { StoreState } from \"../../../reducers\";\r\nimport classes from \"./ResetPassword.module.scss\";\r\nimport { TiHomeOutline } from \"react-icons/ti\";\r\n\r\ninterface RouteParams {\r\n\tresetToken: string;\r\n}\r\n\r\ninterface Props extends RouteComponentProps<RouteParams>, StoreState {\r\n\tpatchResetPassword: (form: IResetPassState, url: string) => Promise<void>;\r\n}\r\n\r\nexport interface IResetPassState {\r\n\tloading?: boolean;\r\n\tnewPassword: string;\r\n\tconfirmPassword: string;\r\n\tpathname?: string;\r\n}\r\n\r\nclass ResetPassword extends Component<Props, IResetPassState> {\r\n\tstate = {\r\n\t\tloading: false,\r\n\t\tnewPassword: \"\",\r\n\t\tconfirmPassword: \"\",\r\n\t\tpathname: this.props.history.location.pathname\r\n\t};\r\n\r\n\thandleChange = (e: { target: HTMLInputElement }) => {\r\n\t\tthis.setState({\r\n\t\t\t...this.state,\r\n\t\t\t[e.target.name]: e.target.value\r\n\t\t});\r\n\t};\r\n\r\n\thandleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n\t\te.preventDefault();\r\n\t\t// Set loading to true which adds spinner\r\n\t\tthis.setState({ loading: true });\r\n\t\t// Login user\r\n\t\tthis.props\r\n\t\t\t.patchResetPassword(\r\n\t\t\t\t{\r\n\t\t\t\t\tnewPassword: this.state.newPassword,\r\n\t\t\t\t\tconfirmPassword: this.state.confirmPassword\r\n\t\t\t\t},\r\n\t\t\t\tthis.props.match.params.resetToken\r\n\t\t\t)\r\n\t\t\t.then(() => {\r\n\t\t\t\t// Refresh form if error received\r\n\t\t\t\tif (this.props.history.location.pathname === this.state.pathname)\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tnewPassword: \"\",\r\n\t\t\t\t\t\tconfirmPassword: \"\",\r\n\t\t\t\t\t\tloading: false\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className={classes.page}>\r\n\t\t\t\t<div className={classes.nav}>\r\n\t\t\t\t\t<Link className={classes.homeLink} to=\"/\">\r\n\t\t\t\t\t\t<button>\r\n\t\t\t\t\t\t\t<TiHomeOutline />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t<Link to=\"/login\">\r\n\t\t\t\t\t\t<button>Login</button>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className={classes.container}>\r\n\t\t\t\t\t<h1>Reset password:</h1>\r\n\t\t\t\t\t<form className={classes.form} onSubmit={this.handleSubmit}>\r\n\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t<span>New Password:</span>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Enter a new Password\"\r\n\t\t\t\t\t\t\t\tname=\"newPassword\"\r\n\t\t\t\t\t\t\t\tvalue={this.state.newPassword}\r\n\t\t\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t\t\t\tminLength={6}\r\n\t\t\t\t\t\t\t\tautoComplete=\"on\"\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t<span>Confirm Password:</span>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Confirm password\"\r\n\t\t\t\t\t\t\t\tname=\"confirmPassword\"\r\n\t\t\t\t\t\t\t\tvalue={this.state.confirmPassword}\r\n\t\t\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t\t\t\tminLength={6}\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t{this.state.loading ? (\r\n\t\t\t\t\t\t\t<div className={classes.spinner}>\r\n\t\t\t\t\t\t\t\t<Spinner />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn__submit\"\r\n\t\t\t\t\t\t\t\t\tvalue=\"Set new password\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Link className={classes.btmLink} to=\"/forgotpassword\">\r\n\t\t\t\t\t\t\t\t\tSend another reset token?\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default connect(null, { patchResetPassword })(ResetPassword);\r\n","import React, { Component } from \"react\";\r\nimport { Switch, Redirect, Route } from \"react-router-dom\";\r\nimport PrivateRoute from \"./PrivateRoute\";\r\nimport Login from \"../auth/Login/Login\";\r\nimport Container from \"../layout/Container/Container\";\r\nimport Register from \"../auth/Register/Register\";\r\nimport PublicRoute from \"./PublicRoute\";\r\nimport ForgotPassword from \"../auth/ForgotPassword/ForgotPassword\";\r\nimport ResetPassword from \"../auth/ResetPassword/ResetPassword\";\r\nimport { AuthState } from \"../../reducers/auth\";\r\n\r\ninterface Props {\r\n\tauth: AuthState;\r\n}\r\n\r\n// Public routes\r\nexport const pubRoutesArr = [\r\n\t{ name: \"Login\", path: \"/login\", component: Login },\r\n\t{\r\n\t\tname: \"Register\",\r\n\t\tpath: \"/register\",\r\n\t\tcomponent: Register\r\n\t},\r\n\t{\r\n\t\tname: \"Forgot Password\",\r\n\t\tpath: \"/forgotpassword\",\r\n\t\tcomponent: ForgotPassword\r\n\t},\r\n\t{\r\n\t\tname: \"Reset Password\",\r\n\t\tpath: \"/forgotpassword/reset/:resetToken\",\r\n\t\tcomponent: ResetPassword\r\n\t}\r\n];\r\n\r\n// Private routes\r\nexport const privRoutesArr = [\r\n\t{ name: \"Dashboard\", path: \"/user\", component: Container, exact: false }\r\n];\r\n\r\nclass Routes extends Component<Props> {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Switch>\r\n\t\t\t\t{pubRoutesArr.map(route => (\r\n\t\t\t\t\t<PublicRoute\r\n\t\t\t\t\t\tkey={route.name}\r\n\t\t\t\t\t\tisAuthenticated={this.props.auth.isAuthenticated}\r\n\t\t\t\t\t\texact\r\n\t\t\t\t\t\tpath={route.path}\r\n\t\t\t\t\t\tcomponent={route.component}\r\n\t\t\t\t\t/>\r\n\t\t\t\t))}\r\n\r\n\t\t\t\t{privRoutesArr.map(route => (\r\n\t\t\t\t\t<PrivateRoute\r\n\t\t\t\t\t\tkey={route.name}\r\n\t\t\t\t\t\tisAuthenticated={this.props.auth.isAuthenticated}\r\n\t\t\t\t\t\texact={route.exact === undefined ? true : route.exact}\r\n\t\t\t\t\t\tpath={route.path}\r\n\t\t\t\t\t\tcomponent={route.component}\r\n\t\t\t\t\t/>\r\n\t\t\t\t))}\r\n\r\n\t\t\t\t{/* Only for pubRoutes for now */}\r\n\t\t\t\t{!this.props.auth.isAuthenticated && (\r\n\t\t\t\t\t<Route render={() => <Redirect to=\"/\" />} />\r\n\t\t\t\t)}\r\n\t\t\t</Switch>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Routes;\r\n","import React, { Component } from \"react\";\r\nimport StatusAlert, { StatusAlertService } from \"react-status-alert\";\r\nimport \"react-status-alert/dist/status-alert.css\";\r\nimport { withRouter, RouteComponentProps } from \"react-router-dom\";\r\nimport { Location } from \"history\";\r\nimport { connect } from \"react-redux\";\r\nimport { setAlert, resetAlert, Alert } from \"../../actions\";\r\n\r\n// RouteComponent Allow the use of withRouter\r\ninterface Props extends RouteComponentProps {\r\n\talerts: Alert;\r\n\tlocation: Location;\r\n}\r\ninterface State {\r\n\talertId: string;\r\n\tlocation: Location;\r\n}\r\n\r\nclass Alerts extends Component<Props, State> {\r\n\tstate = {\r\n\t\talertId: \"\",\r\n\t\tlocation: this.props.location\r\n\t};\r\n\r\n\tcomponentDidUpdate(prevProps: Props) {\r\n\t\t// Remove alert everytime route changes\r\n\t\tif (this.props.location.pathname !== prevProps.location.pathname) {\r\n\t\t\tStatusAlertService.removeAlert(this.state.alertId);\r\n\t\t}\r\n\r\n\t\t// Add new alert whenever alert is added to the store's state\r\n\t\tif (this.props.alerts !== prevProps.alerts) {\r\n\t\t\tconst { msg, alertType } = this.props.alerts;\r\n\t\t\t// Add custom options such as background color for each alert type\r\n\t\t\tconst alertId = StatusAlertService.showAlert(msg, alertType);\r\n\t\t\t// Set new alert Id for removal\r\n\t\t\tthis.setState({ alertId });\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<StatusAlert />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default connect(\r\n\tnull,\r\n\t{\r\n\t\tsetAlert,\r\n\t\tresetAlert\r\n\t}\r\n)(withRouter(Alerts));\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Route, RouteComponentProps, withRouter } from \"react-router-dom\";\r\nimport { checkUser } from \"./actions\";\r\nimport Home from \"./components/pages/Home/Home\";\r\nimport Routes from \"./components/routing/Routes\";\r\nimport Alerts from \"./components/utils/Alerts\";\r\nimport { StoreState } from \"./reducers\";\r\n\r\ninterface Props extends StoreState, RouteComponentProps {\r\n\tcheckUser: () => Promise<void>;\r\n}\r\n\r\ninterface State {\r\n\tchecked: boolean;\r\n}\r\n\r\nclass App extends Component<Props, State> {\r\n\tstate = { checked: false };\r\n\tcomponentDidMount() {\r\n\t\tthis.props.checkUser().then(() => {\r\n\t\t\tif (this.props.auth.isAuthenticated) this.props.history.push(\"/user\"); // push straight to user to get current budget etc.\r\n\t\t\tthis.setState({ checked: true });\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\tthis.state.checked && (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Alerts alerts={this.props.alerts} />\r\n\t\t\t\t\t<Route exact path=\"/\" component={Home} />\r\n\t\t\t\t\t<Routes auth={this.props.auth} />\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t);\r\n\t}\r\n}\r\nconst mapStateToProps = (state: StoreState) => ({\r\n\tauth: state.auth,\r\n\talerts: state.alerts,\r\n\tbudgets: state.budgets,\r\n\tcurrentBudget: state.currentBudget,\r\n\ttransactions: state.transactions,\r\n\tcharts: state.charts,\r\n});\r\n\r\nexport default connect(mapStateToProps, { checkUser })(withRouter(App));\r\n","import { LogoutAction } from \"./../actions/auth\";\r\nimport { ActionTypes, IBudget, GetBudgetAction } from \"../actions\";\r\n\r\nconst initialState: IBudget = {\r\n\tname: \"\",\r\n\tstartingBalance: 0,\r\n\tbalance: 0,\r\n\tcategories: [\"\"]\r\n};\r\n\r\nexport const currentBudgetReducer = (\r\n\tstate = initialState,\r\n\taction: GetBudgetAction | LogoutAction\r\n) => {\r\n\tswitch (action.type) {\r\n\t\tcase ActionTypes.getBudget:\r\n\t\t\treturn action.payload;\r\n\t\tcase ActionTypes.logoutUser:\r\n\t\t\treturn initialState;\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n","import { BudgetActions, ActionTypes, IBudget } from \"./../actions\";\r\n\r\nconst initialState: IBudget[] = [];\r\n\r\nexport const budgetsReducer = (state = initialState, action: BudgetActions) => {\r\n\tswitch (action.type) {\r\n\t\tcase ActionTypes.addBudget:\r\n\t\t\treturn [...state, action.payload];\r\n\t\tcase ActionTypes.getAllBudget:\r\n\t\tcase ActionTypes.editBudget:\r\n\t\t\treturn action.payload;\r\n\t\tcase ActionTypes.deleteBudget:\r\n\t\t\t// Filter new budget list without the deleted budget\r\n\t\t\treturn state.filter(b => b._id !== action.payload._id);\r\n\t\tcase ActionTypes.logoutUser:\r\n\t\t\treturn initialState;\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n","import { TransactionActions, ActionTypes, ITransaction } from \"./../actions\";\r\n\r\nexport interface ITransactionResult {\r\n\t_id: {\r\n\t\tmonth: number;\r\n\t\tyear: number;\r\n\t};\r\n\tincome: number;\r\n\texpense: number;\r\n\ttransactions: ITransaction[];\r\n}\r\n\r\nconst initialState: ITransactionResult[] = [];\r\n\r\nexport const transactionReducer = (\r\n\tstate = initialState,\r\n\taction: TransactionActions\r\n) => {\r\n\tswitch (action.type) {\r\n\t\tcase ActionTypes.getTransactions:\r\n\t\t\t// If state already empty\r\n\t\t\tif (state.length === 0) return action.payload;\r\n\t\t\telse {\r\n\t\t\t\t// Cant put state to a variable as it doesnt like it and will create bugs\r\n\t\t\t\taction.payload.forEach(newGroup => {\r\n\t\t\t\t\t// Initiate existAlready\r\n\t\t\t\t\tlet existAlready = false;\r\n\t\t\t\t\tfor (let group of state) {\r\n\t\t\t\t\t\t// Find if newGroup already exist within transaction groups\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tgroup._id.month === newGroup._id.month &&\r\n\t\t\t\t\t\t\tgroup._id.year === newGroup._id.year\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t// Update group transactions\r\n\t\t\t\t\t\t\t// Be wary of duplicates\r\n\t\t\t\t\t\t\tgroup.transactions = [\r\n\t\t\t\t\t\t\t\t...group.transactions,\r\n\t\t\t\t\t\t\t\t...newGroup.transactions\r\n\t\t\t\t\t\t\t];\r\n\r\n\t\t\t\t\t\t\t// Set exist to true if found match\r\n\t\t\t\t\t\t\texistAlready = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!existAlready) {\r\n\t\t\t\t\t\t// Conditional to add new group to transaction after loop\r\n\t\t\t\t\t\tstate.push(newGroup);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t/// If newGroup doesnt exist in all of the current groups, add the new group to the transaction\r\n\t\t\t\treturn state;\r\n\t\t\t}\r\n\t\tcase ActionTypes.addTransaction:\r\n\t\t\treturn action.payload;\r\n\t\tcase ActionTypes.clearTransactions:\r\n\t\tcase ActionTypes.logoutUser:\r\n\t\t\treturn initialState;\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n","import { AuthActions, IUser, ActionTypes } from \"../actions\";\r\nexport interface AuthState {\r\n\tcurrentUser: IUser | null;\r\n\tisAuthenticated: boolean;\r\n}\r\n\r\nconst initialState: AuthState = {\r\n\tcurrentUser: null,\r\n\tisAuthenticated: false\r\n};\r\n\r\nexport const authReducer = (state = initialState, action: AuthActions) => {\r\n\tswitch (action.type) {\r\n\t\tcase ActionTypes.checkUser:\r\n\t\tcase ActionTypes.loginUser:\r\n\t\tcase ActionTypes.registerUser:\r\n\t\tcase ActionTypes.resetPassword:\r\n\t\t\treturn {\r\n\t\t\t\tcurrentUser: action.payload,\r\n\t\t\t\tisAuthenticated: true\r\n\t\t\t};\r\n\t\tcase ActionTypes.logoutUser:\r\n\t\t\treturn {\r\n\t\t\t\tcurrentUser: null,\r\n\t\t\t\tisAuthenticated: false\r\n\t\t\t};\r\n\t\tcase ActionTypes.updateUser:\r\n\t\tcase ActionTypes.changePassword:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcurrentUser: action.payload\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n","import { ActionTypes, AlertActions, Alert, AlertType } from \"../actions\";\r\n\r\nconst initialState: Alert = {\r\n\tmsg: \"\",\r\n\talertType: AlertType.success\r\n};\r\n\r\nexport const alertReducer = (state = initialState, action: AlertActions) => {\r\n\tswitch (action.type) {\r\n\t\tcase ActionTypes.alert:\r\n\t\t\treturn action.payload;\r\n\r\n\t\tcase ActionTypes.resetAlert:\r\n\t\t\treturn initialState;\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n","import { ChartActions, ActionTypes } from \"./../actions/types\";\r\nexport interface BudgetStats {\r\n\t_id: {\r\n\t\tmonth: number;\r\n\t\tyear: number;\r\n\t};\r\n\tincome: number;\r\n\texpense: number;\r\n\tbalance: number;\r\n}\r\n\r\nexport interface BudgetCategoryData {\r\n\t_id: {\r\n\t\tmonth?: number;\r\n\t\tyear?: number;\r\n\t\tcategory: number;\r\n\t};\r\n\tincome: number;\r\n\texpense: number;\r\n}\r\n\r\nexport interface BudgetDates {\r\n\t_id: {\r\n\t\tyear: number;\r\n\t};\r\n\tmonths: number[];\r\n}\r\n\r\nexport interface ChartStoreState {\r\n\tbarGraph: BudgetStats[];\r\n\tpieGraph: BudgetCategoryData[];\r\n\tdates: BudgetDates[];\r\n}\r\n\r\nexport const initialState: ChartStoreState = {\r\n\tbarGraph: [],\r\n\tpieGraph: [],\r\n\tdates: []\r\n};\r\n\r\nexport const chartReducer = (state = initialState, action: ChartActions) => {\r\n\tswitch (action.type) {\r\n\t\tcase ActionTypes.getDates:\r\n\t\t\treturn { ...state, dates: action.payload };\r\n\t\tcase ActionTypes.getStats:\r\n\t\t\treturn { ...state, barGraph: action.payload };\r\n\t\tcase ActionTypes.getCategoryData:\r\n\t\t\treturn { ...state, pieGraph: action.payload };\r\n\t\tcase ActionTypes.logoutUser:\r\n\t\t\treturn initialState;\r\n\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n","import { currentBudgetReducer } from \"./currentBudget\";\r\nimport { combineReducers } from \"redux\";\r\nimport { budgetsReducer } from \"./budgets\";\r\nimport { transactionReducer, ITransactionResult } from \"./transactions\";\r\nimport { authReducer, AuthState } from \"./auth\";\r\nimport { alertReducer } from \"./alerts\";\r\nimport { IBudget, Alert } from \"../actions\";\r\nimport { ChartStoreState, chartReducer } from \"./charts\";\r\n\r\nexport interface StoreState {\r\n\tauth: AuthState;\r\n\talerts: Alert;\r\n\tbudgets: IBudget[];\r\n\tcurrentBudget: IBudget;\r\n\ttransactions: ITransactionResult[];\r\n\tcharts: ChartStoreState;\r\n}\r\n\r\nexport const reducers = combineReducers<StoreState>({\r\n\tauth: authReducer,\r\n\talerts: alertReducer,\r\n\tbudgets: budgetsReducer,\r\n\tcurrentBudget: currentBudgetReducer,\r\n\ttransactions: transactionReducer,\r\n\tcharts: chartReducer\r\n});\r\n","import { createStore, applyMiddleware } from \"redux\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport thunk from \"redux-thunk\";\r\nimport { reducers } from \"./reducers\";\r\n\r\n// thunk allows async dispatch\r\nconst middleware = [thunk];\r\nconst composeEnhancers = composeWithDevTools({ trace: true }); //allows tracing\r\n\r\nconst store = createStore(\r\n\treducers,\r\n\tcomposeEnhancers(applyMiddleware(...middleware))\r\n);\r\n\r\nexport default store;\r\n\r\n// REDUX\r\n// 1) Set up store store = createStore(rootReducer, initialState, compose(applyMiddleware(...middleware)))\r\n// 2) Add provider and parameter store inside it, inside app.js\r\n// 3) create rootReducer that uses combineReducer\r\n// 4) Create reducer with initial state, action ---- action takes in a type and pay load /// Add switch case statement for each cases that return a payload from actions\r\n// 5) To make sure strings are immutable, store types into a variable in a file under the folder actions/types\r\n// 6) Create action with argument of dispatch and using thunk, add arguments to be used in the payload.\r\n// 7) Go to component that will use the action and add connect()(Component). --- it takes in connect(mapStateToProps?, mapDispatchToProps?, mergeProps?, options?)\r\n// 8) Add proptypes of Component and inside, the actions you imported: 'pt/f/r' and then use actions passing in the arguments required.\r\n// 9) Create a component for the action by adding connect with mapStateToProps, creating the function that passes a state --- this is done through connect and root reducer.\r\n// 10) Now have access to the state and can include conditionals of what to display/input based on state.\r\n// 11) Add component and it should work\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport App from \"./App\";\r\nimport store from \"./store\";\r\nimport \"./styles/_main.scss\";\r\n\r\nReactDOM.render(\r\n\t<main>\r\n\t\t<Router>\r\n\t\t\t<Provider store={store}>\r\n\t\t\t\t<App />\r\n\t\t\t</Provider>\r\n\t\t</Router>\r\n\t</main>,\r\n\tdocument.getElementById(\"root\")\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"AddBudget_title__1ikKL\",\"container\":\"AddBudget_container___jNo-\",\"spinner\":\"AddBudget_spinner__uMxHk\",\"form\":\"AddBudget_form__1MDEU\",\"btnGreen\":\"AddBudget_btnGreen__2tzP9\",\"btnCancel\":\"AddBudget_btnCancel__3VreO\",\"btnDel\":\"AddBudget_btnDel__7aU09\",\"btnCategories\":\"AddBudget_btnCategories__2OR7l\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"Login_page__fYXEG\",\"spinner\":\"Login_spinner__IiSWY\",\"homeLink\":\"Login_homeLink__1pLom\",\"container\":\"Login_container__HgJPU\",\"form\":\"Login_form__2ZLQ8\",\"loginBtn\":\"Login_loginBtn__3Jgzs\",\"registerBtn\":\"Login_registerBtn__2e-wF\",\"link\":\"Login_link__wasDZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"SideNav_container__3w5mn\",\"add\":\"SideNav_add__31Amg\",\"budgets\":\"SideNav_budgets__18Z6L\",\"budgetActions\":\"SideNav_budgetActions__5Ix-Z\",\"userActions\":\"SideNav_userActions__2zbGr\",\"userActionsTable\":\"SideNav_userActionsTable__1b-Vf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chart\":\"PieGraph_chart__3__Q-\",\"title\":\"PieGraph_title__2W76t\",\"labels\":\"PieGraph_labels__QNU8u\",\"toolTip\":\"PieGraph_toolTip__1o5fT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"ResetPassword_page__8KbK7\",\"nav\":\"ResetPassword_nav__3yLNk\",\"spinner\":\"ResetPassword_spinner__3bJLo\",\"container\":\"ResetPassword_container__2lejU\",\"form\":\"ResetPassword_form__kIzS5\",\"btmLink\":\"ResetPassword_btmLink__3k2SZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"Home_page__3QZvh\",\"nav\":\"Home_nav__UDQoz\",\"title\":\"Home_title__weVer\",\"desc\":\"Home_desc__-VGk3\",\"cta\":\"Home_cta__1gjy1\",\"btnShaddow\":\"Home_btnShaddow__28NPg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"UpdateMe_title__3nThV\",\"container\":\"UpdateMe_container__1u266\",\"spinner\":\"UpdateMe_spinner__3CLt8\",\"form\":\"UpdateMe_form__2Wh94\",\"btnGreen\":\"UpdateMe_btnGreen__12ZeD\",\"btnCancel\":\"UpdateMe_btnCancel__1wcuZ\",\"btnDel\":\"UpdateMe_btnDel__29JxN\",\"changePassword\":\"UpdateMe_changePassword__1Za2j\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"ForgotPassword_page__3HYNs\",\"nav\":\"ForgotPassword_nav__3-R1T\",\"spinner\":\"ForgotPassword_spinner__3og8m\",\"desc\":\"ForgotPassword_desc__2qwbI\",\"container\":\"ForgotPassword_container__VQFMs\",\"form\":\"ForgotPassword_form__Y0zbC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"Container_page__2d-V4\",\"logout\":\"Container_logout__1d35_\",\"container\":\"Container_container__11b2F\",\"routes\":\"Container_routes__2_4HH\",\"selected\":\"Container_selected__3nV5C\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"barGraphHeading\":\"Graphs_barGraphHeading__3bhNz\",\"barGraphTip\":\"Graphs_barGraphTip__38gRF\",\"pieGraphGroup\":\"Graphs_pieGraphGroup__2LPmv\",\"pieGraph\":\"Graphs_pieGraph__27obF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"Register_page__3QC1A\",\"nav\":\"Register_nav__1P_-M\",\"spinner\":\"Register_spinner__1Rojc\",\"container\":\"Register_container__1ZHv_\",\"form\":\"Register_form__1Qv9-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"ChangePassword_title__14kaC\",\"container\":\"ChangePassword_container__g_w-x\",\"spinner\":\"ChangePassword_spinner__beycm\",\"form\":\"ChangePassword_form__Qe8Lp\",\"btnGreen\":\"ChangePassword_btnGreen__3vHZR\",\"btnCancel\":\"ChangePassword_btnCancel__SSpYa\",\"btnDel\":\"ChangePassword_btnDel__37Ipu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinner\":\"Spinner_spinner__UVDYg\",\"cube1\":\"Spinner_cube1__1Gl67\",\"cube2\":\"Spinner_cube2__3vlM6\",\"sk-cubemove\":\"Spinner_sk-cubemove__3qadd\"};"],"sourceRoot":""}